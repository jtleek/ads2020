<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>7 Week 6 | Week 1</title>
  <meta name="description" content="This book provides course material for Biostatistics 140.711 at the Johns Hopkins Bloomberg School of Public Health." />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="7 Week 6 | Week 1" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This book provides course material for Biostatistics 140.711 at the Johns Hopkins Bloomberg School of Public Health." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="7 Week 6 | Week 1" />
  
  <meta name="twitter:description" content="This book provides course material for Biostatistics 140.711 at the Johns Hopkins Bloomberg School of Public Health." />
  

<meta name="author" content="Jeff Leek and Roger D. Peng" />


<meta name="date" content="2020-11-02" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="week-5.html"/>
<link rel="next" href="week-7.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/table1-1.0/table1_defaults.css" rel="stylesheet" />


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<img src ="ads2020-small.png" class="center">

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Welcome and Syllabus</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#assumptions-and-pre-requisites"><i class="fa fa-check"></i><b>1.1</b> Assumptions and pre-requisites</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#learning-objectives"><i class="fa fa-check"></i><b>1.2</b> Learning Objectives</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#course-staff"><i class="fa fa-check"></i><b>1.3</b> Course Staff</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#course-logistics"><i class="fa fa-check"></i><b>1.4</b> Course logistics</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#assignment-due-dates"><i class="fa fa-check"></i><b>1.5</b> Assignment Due Dates</a></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#the-pandemic"><i class="fa fa-check"></i><b>1.6</b> The Pandemic</a></li>
<li class="chapter" data-level="1.7" data-path="index.html"><a href="index.html#grading"><i class="fa fa-check"></i><b>1.7</b> Grading</a><ul>
<li class="chapter" data-level="1.7.1" data-path="index.html"><a href="index.html#philosophy"><i class="fa fa-check"></i><b>1.7.1</b> Philosophy</a></li>
<li class="chapter" data-level="1.7.2" data-path="index.html"><a href="index.html#relative-weights"><i class="fa fa-check"></i><b>1.7.2</b> Relative weights</a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="index.html"><a href="index.html#assignments"><i class="fa fa-check"></i><b>1.8</b> Assignments</a><ul>
<li class="chapter" data-level="1.8.1" data-path="index.html"><a href="index.html#submitting-assignments"><i class="fa fa-check"></i><b>1.8.1</b> Submitting assignments</a></li>
<li class="chapter" data-level="1.8.2" data-path="index.html"><a href="index.html#data-analysis-assignments"><i class="fa fa-check"></i><b>1.8.2</b> Data Analysis Assignments</a></li>
<li class="chapter" data-level="1.8.3" data-path="index.html"><a href="index.html#data-analysis-reviews"><i class="fa fa-check"></i><b>1.8.3</b> Data Analysis Reviews</a></li>
<li class="chapter" data-level="1.8.4" data-path="index.html"><a href="index.html#reviewing-code-of-conduct"><i class="fa fa-check"></i><b>1.8.4</b> Reviewing Code of Conduct</a></li>
</ul></li>
<li class="chapter" data-level="1.9" data-path="index.html"><a href="index.html#code-of-conduct"><i class="fa fa-check"></i><b>1.9</b> Code of Conduct</a><ul>
<li class="chapter" data-level="1.9.1" data-path="index.html"><a href="index.html#need-help"><i class="fa fa-check"></i><b>1.9.1</b> Need Help?</a></li>
<li class="chapter" data-level="1.9.2" data-path="index.html"><a href="index.html#feedback"><i class="fa fa-check"></i><b>1.9.2</b> Feedback</a></li>
<li class="chapter" data-level="1.9.3" data-path="index.html"><a href="index.html#license-and-attribution"><i class="fa fa-check"></i><b>1.9.3</b> License and attribution</a></li>
</ul></li>
<li class="chapter" data-level="1.10" data-path="index.html"><a href="index.html#academic-ethics"><i class="fa fa-check"></i><b>1.10</b> Academic Ethics</a></li>
<li class="chapter" data-level="1.11" data-path="index.html"><a href="index.html#disability-support-services"><i class="fa fa-check"></i><b>1.11</b> Disability support services</a></li>
<li class="chapter" data-level="1.12" data-path="index.html"><a href="index.html#email-alerts"><i class="fa fa-check"></i><b>1.12</b> Email alerts</a></li>
<li class="chapter" data-level="1.13" data-path="index.html"><a href="index.html#previous-versions-of-the-class"><i class="fa fa-check"></i><b>1.13</b> Previous versions of the class</a></li>
<li class="chapter" data-level="1.14" data-path="index.html"><a href="index.html#typos-and-corrections"><i class="fa fa-check"></i><b>1.14</b> Typos and corrections</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="week-1.html"><a href="week-1.html"><i class="fa fa-check"></i><b>2</b> Week 1</a><ul>
<li class="chapter" data-level="2.1" data-path="week-1.html"><a href="week-1.html#week-1-learning-objectives"><i class="fa fa-check"></i><b>2.1</b> Week 1 Learning objectives</a></li>
<li class="chapter" data-level="2.2" data-path="week-1.html"><a href="week-1.html#what-is-advanced-data-science-anyway"><i class="fa fa-check"></i><b>2.2</b> What is advanced data science anyway?</a><ul>
<li class="chapter" data-level="2.2.1" data-path="week-1.html"><a href="week-1.html#maybe-we-should-start-by-defining-data-science."><i class="fa fa-check"></i><b>2.2.1</b> Maybe we should start by defining data science….</a></li>
<li class="chapter" data-level="2.2.2" data-path="week-1.html"><a href="week-1.html#data-science-is-hard-but-not-like-math-is-hard"><i class="fa fa-check"></i><b>2.2.2</b> Data Science is hard, but not like math is hard</a></li>
<li class="chapter" data-level="2.2.3" data-path="week-1.html"><a href="week-1.html#so-what-is-advanced-data-science"><i class="fa fa-check"></i><b>2.2.3</b> So what is advanced data science?</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="week-1.html"><a href="week-1.html#types-of-data-analytic-questions"><i class="fa fa-check"></i><b>2.3</b> Types of data analytic questions</a><ul>
<li class="chapter" data-level="2.3.1" data-path="week-1.html"><a href="week-1.html#descriptive"><i class="fa fa-check"></i><b>2.3.1</b> Descriptive</a></li>
<li class="chapter" data-level="2.3.2" data-path="week-1.html"><a href="week-1.html#exploratory"><i class="fa fa-check"></i><b>2.3.2</b> Exploratory</a></li>
<li class="chapter" data-level="2.3.3" data-path="week-1.html"><a href="week-1.html#inferential"><i class="fa fa-check"></i><b>2.3.3</b> Inferential</a></li>
<li class="chapter" data-level="2.3.4" data-path="week-1.html"><a href="week-1.html#predictive"><i class="fa fa-check"></i><b>2.3.4</b> Predictive</a></li>
<li class="chapter" data-level="2.3.5" data-path="week-1.html"><a href="week-1.html#causal"><i class="fa fa-check"></i><b>2.3.5</b> Causal</a></li>
<li class="chapter" data-level="2.3.6" data-path="week-1.html"><a href="week-1.html#mechanistic"><i class="fa fa-check"></i><b>2.3.6</b> Mechanistic</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="week-1.html"><a href="week-1.html#a-data-analytic-rubric"><i class="fa fa-check"></i><b>2.4</b> A data analytic rubric</a><ul>
<li class="chapter" data-level="2.4.1" data-path="week-1.html"><a href="week-1.html#answering-the-question"><i class="fa fa-check"></i><b>2.4.1</b> Answering the question</a></li>
<li class="chapter" data-level="2.4.2" data-path="week-1.html"><a href="week-1.html#checking-the-data"><i class="fa fa-check"></i><b>2.4.2</b> Checking the data</a></li>
<li class="chapter" data-level="2.4.3" data-path="week-1.html"><a href="week-1.html#tidying-the-data"><i class="fa fa-check"></i><b>2.4.3</b> Tidying the data</a></li>
<li class="chapter" data-level="2.4.4" data-path="week-1.html"><a href="week-1.html#exploratory-analysis"><i class="fa fa-check"></i><b>2.4.4</b> Exploratory analysis</a></li>
<li class="chapter" data-level="2.4.5" data-path="week-1.html"><a href="week-1.html#inference"><i class="fa fa-check"></i><b>2.4.5</b> Inference</a></li>
<li class="chapter" data-level="2.4.6" data-path="week-1.html"><a href="week-1.html#prediction"><i class="fa fa-check"></i><b>2.4.6</b> Prediction</a></li>
<li class="chapter" data-level="2.4.7" data-path="week-1.html"><a href="week-1.html#causality"><i class="fa fa-check"></i><b>2.4.7</b> Causality</a></li>
<li class="chapter" data-level="2.4.8" data-path="week-1.html"><a href="week-1.html#written-analyses"><i class="fa fa-check"></i><b>2.4.8</b> Written analyses</a></li>
<li class="chapter" data-level="2.4.9" data-path="week-1.html"><a href="week-1.html#figures"><i class="fa fa-check"></i><b>2.4.9</b> Figures</a></li>
<li class="chapter" data-level="2.4.10" data-path="week-1.html"><a href="week-1.html#presentations"><i class="fa fa-check"></i><b>2.4.10</b> Presentations</a></li>
<li class="chapter" data-level="2.4.11" data-path="week-1.html"><a href="week-1.html#reproducibility"><i class="fa fa-check"></i><b>2.4.11</b> Reproducibility</a></li>
<li class="chapter" data-level="2.4.12" data-path="week-1.html"><a href="week-1.html#r-packages"><i class="fa fa-check"></i><b>2.4.12</b> R packages</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="week-1.html"><a href="week-1.html#your-first-assignment---deconstructing-an-analysis"><i class="fa fa-check"></i><b>2.5</b> Your first assignment - deconstructing an analysis</a></li>
<li class="chapter" data-level="2.6" data-path="week-1.html"><a href="week-1.html#additional-resources"><i class="fa fa-check"></i><b>2.6</b> Additional Resources</a></li>
<li class="chapter" data-level="2.7" data-path="week-1.html"><a href="week-1.html#homework"><i class="fa fa-check"></i><b>2.7</b> Homework</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="week-2.html"><a href="week-2.html"><i class="fa fa-check"></i><b>3</b> Week 2</a><ul>
<li class="chapter" data-level="3.1" data-path="week-2.html"><a href="week-2.html#week-2-learning-objectives"><i class="fa fa-check"></i><b>3.1</b> Week 2 Learning objectives</a></li>
<li class="chapter" data-level="3.2" data-path="week-2.html"><a href="week-2.html#the-steps-in-a-data-analysis"><i class="fa fa-check"></i><b>3.2</b> The steps in a data analysis</a><ul>
<li class="chapter" data-level="3.2.1" data-path="week-2.html"><a href="week-2.html#defining-the-question"><i class="fa fa-check"></i><b>3.2.1</b> Defining the question</a></li>
<li class="chapter" data-level="3.2.2" data-path="week-2.html"><a href="week-2.html#defining-the-ideal-data-set"><i class="fa fa-check"></i><b>3.2.2</b> Defining the ideal data set</a></li>
<li class="chapter" data-level="3.2.3" data-path="week-2.html"><a href="week-2.html#determine-the-data-you-can-access"><i class="fa fa-check"></i><b>3.2.3</b> Determine the data you can access</a></li>
<li class="chapter" data-level="3.2.4" data-path="week-2.html"><a href="week-2.html#obtain-the-data"><i class="fa fa-check"></i><b>3.2.4</b> Obtain the data</a></li>
<li class="chapter" data-level="3.2.5" data-path="week-2.html"><a href="week-2.html#clean-the-data"><i class="fa fa-check"></i><b>3.2.5</b> Clean the data</a></li>
<li class="chapter" data-level="3.2.6" data-path="week-2.html"><a href="week-2.html#exploratory-data-analysis"><i class="fa fa-check"></i><b>3.2.6</b> Exploratory data analysis</a></li>
<li class="chapter" data-level="3.2.7" data-path="week-2.html"><a href="week-2.html#statistical-predictionmodeling"><i class="fa fa-check"></i><b>3.2.7</b> Statistical prediction/modeling</a></li>
<li class="chapter" data-level="3.2.8" data-path="week-2.html"><a href="week-2.html#interpret-results"><i class="fa fa-check"></i><b>3.2.8</b> Interpret results</a></li>
<li class="chapter" data-level="3.2.9" data-path="week-2.html"><a href="week-2.html#challenge-results"><i class="fa fa-check"></i><b>3.2.9</b> Challenge results</a></li>
<li class="chapter" data-level="3.2.10" data-path="week-2.html"><a href="week-2.html#synthesizewrite-up-results"><i class="fa fa-check"></i><b>3.2.10</b> Synthesize/write up results</a></li>
<li class="chapter" data-level="3.2.11" data-path="week-2.html"><a href="week-2.html#create-reproducible-code"><i class="fa fa-check"></i><b>3.2.11</b> Create reproducible code</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="week-2.html"><a href="week-2.html#raw-informal-and-formal-data-science"><i class="fa fa-check"></i><b>3.3</b> Raw, informal, and formal data science</a></li>
<li class="chapter" data-level="3.4" data-path="week-1.html"><a href="week-1.html#additional-resources"><i class="fa fa-check"></i><b>3.4</b> Additional Resources</a></li>
<li class="chapter" data-level="3.5" data-path="week-1.html"><a href="week-1.html#homework"><i class="fa fa-check"></i><b>3.5</b> Homework</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="week-3.html"><a href="week-3.html"><i class="fa fa-check"></i><b>4</b> Week 3</a><ul>
<li class="chapter" data-level="4.1" data-path="week-3.html"><a href="week-3.html#week-3-learning-objectives"><i class="fa fa-check"></i><b>4.1</b> Week 3 Learning Objectives</a></li>
<li class="chapter" data-level="4.2" data-path="week-3.html"><a href="week-3.html#organizing-a-data-analysis"><i class="fa fa-check"></i><b>4.2</b> Organizing a data analysis</a><ul>
<li class="chapter" data-level="4.2.1" data-path="week-3.html"><a href="week-3.html#motivation---the-stick"><i class="fa fa-check"></i><b>4.2.1</b> Motivation - the stick</a></li>
<li class="chapter" data-level="4.2.2" data-path="week-3.html"><a href="week-3.html#motivation---the-carrot"><i class="fa fa-check"></i><b>4.2.2</b> Motivation - the carrot</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="week-3.html"><a href="week-3.html#project-organization"><i class="fa fa-check"></i><b>4.3</b> Project Organization</a><ul>
<li class="chapter" data-level="4.3.1" data-path="week-3.html"><a href="week-3.html#readme.md"><i class="fa fa-check"></i><b>4.3.1</b> README.md</a></li>
<li class="chapter" data-level="4.3.2" data-path="week-3.html"><a href="week-3.html#gitignore"><i class="fa fa-check"></i><b>4.3.2</b> .gitignore</a></li>
<li class="chapter" data-level="4.3.3" data-path="week-3.html"><a href="week-3.html#data"><i class="fa fa-check"></i><b>4.3.3</b> data/</a></li>
<li class="chapter" data-level="4.3.4" data-path="week-3.html"><a href="week-3.html#code"><i class="fa fa-check"></i><b>4.3.4</b> code/</a></li>
<li class="chapter" data-level="4.3.5" data-path="week-1.html"><a href="week-1.html#figures"><i class="fa fa-check"></i><b>4.3.5</b> figures</a></li>
<li class="chapter" data-level="4.3.6" data-path="week-3.html"><a href="week-3.html#products"><i class="fa fa-check"></i><b>4.3.6</b> products/</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="week-3.html"><a href="week-3.html#file-naming"><i class="fa fa-check"></i><b>4.4</b> File naming</a></li>
<li class="chapter" data-level="4.5" data-path="week-3.html"><a href="week-3.html#absolute-vs.-relative-paths"><i class="fa fa-check"></i><b>4.5</b> Absolute vs. relative paths</a></li>
<li class="chapter" data-level="4.6" data-path="week-3.html"><a href="week-3.html#coding-variables"><i class="fa fa-check"></i><b>4.6</b> Coding Variables</a></li>
<li class="chapter" data-level="4.7" data-path="week-3.html"><a href="week-3.html#project-management-software"><i class="fa fa-check"></i><b>4.7</b> Project management software</a></li>
<li class="chapter" data-level="4.8" data-path="week-3.html"><a href="week-3.html#coding-style"><i class="fa fa-check"></i><b>4.8</b> Coding style</a></li>
<li class="chapter" data-level="4.9" data-path="week-3.html"><a href="week-3.html#chain-of-custody-for-data"><i class="fa fa-check"></i><b>4.9</b> Chain of Custody for Data</a></li>
<li class="chapter" data-level="4.10" data-path="week-3.html"><a href="week-3.html#version-control"><i class="fa fa-check"></i><b>4.10</b> Version Control</a></li>
<li class="chapter" data-level="4.11" data-path="week-1.html"><a href="week-1.html#additional-resources"><i class="fa fa-check"></i><b>4.11</b> Additional Resources</a></li>
<li class="chapter" data-level="4.12" data-path="week-1.html"><a href="week-1.html#homework"><i class="fa fa-check"></i><b>4.12</b> Homework</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="week-4.html"><a href="week-4.html"><i class="fa fa-check"></i><b>5</b> Week 4</a><ul>
<li class="chapter" data-level="5.1" data-path="week-4.html"><a href="week-4.html#week-4-learning-objectives"><i class="fa fa-check"></i><b>5.1</b> Week 4 Learning Objectives</a></li>
<li class="chapter" data-level="5.2" data-path="week-4.html"><a href="week-4.html#the-optimality-paradox"><i class="fa fa-check"></i><b>5.2</b> The optimality paradox</a></li>
<li class="chapter" data-level="5.3" data-path="week-4.html"><a href="week-4.html#an-example-of-the-art-of-data-science"><i class="fa fa-check"></i><b>5.3</b> An example of the art of data science</a><ul>
<li class="chapter" data-level="5.3.1" data-path="week-4.html"><a href="week-4.html#an-important-subtlety---analyst-decisions-change-the-question"><i class="fa fa-check"></i><b>5.3.1</b> An important subtlety - analyst decisions change the question</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="week-4.html"><a href="week-4.html#early-definitions-of-success"><i class="fa fa-check"></i><b>5.4</b> Early definitions of success</a><ul>
<li class="chapter" data-level="5.4.1" data-path="week-1.html"><a href="week-1.html#reproducibility"><i class="fa fa-check"></i><b>5.4.1</b> Reproducibility</a></li>
<li class="chapter" data-level="5.4.2" data-path="week-4.html"><a href="week-4.html#replicability"><i class="fa fa-check"></i><b>5.4.2</b> Replicability</a></li>
<li class="chapter" data-level="5.4.3" data-path="week-4.html"><a href="week-4.html#false-discovery"><i class="fa fa-check"></i><b>5.4.3</b> False discovery</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="week-4.html"><a href="week-4.html#a-theory-of-data-science-success"><i class="fa fa-check"></i><b>5.5</b> A theory of data science success</a><ul>
<li class="chapter" data-level="5.5.1" data-path="week-4.html"><a href="week-4.html#elements-of-data-science"><i class="fa fa-check"></i><b>5.5.1</b> Elements of Data Science</a></li>
<li class="chapter" data-level="5.5.2" data-path="week-4.html"><a href="week-4.html#principles-of-data-science"><i class="fa fa-check"></i><b>5.5.2</b> Principles of Data Science</a></li>
<li class="chapter" data-level="5.5.3" data-path="week-4.html"><a href="week-4.html#data-matching"><i class="fa fa-check"></i><b>5.5.3</b> Data matching</a></li>
<li class="chapter" data-level="5.5.4" data-path="week-4.html"><a href="week-4.html#exhaustive"><i class="fa fa-check"></i><b>5.5.4</b> Exhaustive</a></li>
<li class="chapter" data-level="5.5.5" data-path="week-4.html"><a href="week-4.html#skeptical"><i class="fa fa-check"></i><b>5.5.5</b> Skeptical</a></li>
<li class="chapter" data-level="5.5.6" data-path="week-4.html"><a href="week-4.html#second-order"><i class="fa fa-check"></i><b>5.5.6</b> Second order</a></li>
<li class="chapter" data-level="5.5.7" data-path="week-4.html"><a href="week-4.html#transparent"><i class="fa fa-check"></i><b>5.5.7</b> Transparent</a></li>
<li class="chapter" data-level="5.5.8" data-path="week-4.html"><a href="week-4.html#reproducible"><i class="fa fa-check"></i><b>5.5.8</b> Reproducible</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="week-4.html"><a href="week-4.html#a-successful-data-analysis"><i class="fa fa-check"></i><b>5.6</b> A successful data analysis</a></li>
<li class="chapter" data-level="5.7" data-path="week-4.html"><a href="week-4.html#constraints-and-expectation-matching"><i class="fa fa-check"></i><b>5.7</b> Constraints and expectation matching</a></li>
<li class="chapter" data-level="5.8" data-path="week-4.html"><a href="week-4.html#what-about-being-correct"><i class="fa fa-check"></i><b>5.8</b> What about being correct?</a></li>
<li class="chapter" data-level="5.9" data-path="week-1.html"><a href="week-1.html#additional-resources"><i class="fa fa-check"></i><b>5.9</b> Additional Resources</a></li>
<li class="chapter" data-level="5.10" data-path="week-1.html"><a href="week-1.html#homework"><i class="fa fa-check"></i><b>5.10</b> Homework</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="week-5.html"><a href="week-5.html"><i class="fa fa-check"></i><b>6</b> Week 5</a><ul>
<li class="chapter" data-level="6.1" data-path="week-5.html"><a href="week-5.html#week-5-learning-objectives"><i class="fa fa-check"></i><b>6.1</b> Week 5 Learning Objectives</a></li>
<li class="chapter" data-level="6.2" data-path="week-5.html"><a href="week-5.html#skepticism-vs.-discovery"><i class="fa fa-check"></i><b>6.2</b> Skepticism vs. Discovery</a></li>
<li class="chapter" data-level="6.3" data-path="week-1.html"><a href="week-1.html#figures"><i class="fa fa-check"></i><b>6.3</b> Figures</a><ul>
<li class="chapter" data-level="6.3.1" data-path="week-5.html"><a href="week-5.html#just-modeling-results---show-the-data"><i class="fa fa-check"></i><b>6.3.1</b> Just modeling results -&gt; show the data!</a></li>
<li class="chapter" data-level="6.3.2" data-path="week-5.html"><a href="week-5.html#dynamite-plots---scatterplots"><i class="fa fa-check"></i><b>6.3.2</b> Dynamite plots -&gt; scatterplots</a></li>
<li class="chapter" data-level="6.3.3" data-path="week-5.html"><a href="week-5.html#ridiculograms---clustering-diagrams"><i class="fa fa-check"></i><b>6.3.3</b> Ridiculograms -&gt; clustering diagrams</a></li>
<li class="chapter" data-level="6.3.4" data-path="week-5.html"><a href="week-5.html#venn-diagrams---upset-plots"><i class="fa fa-check"></i><b>6.3.4</b> Venn diagrams -&gt; upset plots</a></li>
<li class="chapter" data-level="6.3.5" data-path="week-5.html"><a href="week-5.html#extreme-variation-in-scales---log-scales"><i class="fa fa-check"></i><b>6.3.5</b> Extreme variation in scales -&gt; log scales</a></li>
<li class="chapter" data-level="6.3.6" data-path="week-5.html"><a href="week-5.html#correlated-measurements---ma-plots"><i class="fa fa-check"></i><b>6.3.6</b> Correlated measurements -&gt; MA plots</a></li>
<li class="chapter" data-level="6.3.7" data-path="week-5.html"><a href="week-5.html#axes-cutoff---plot-to-zero"><i class="fa fa-check"></i><b>6.3.7</b> Axes cutoff -&gt; plot to zero</a></li>
<li class="chapter" data-level="6.3.8" data-path="week-5.html"><a href="week-5.html#d-graphics---just-dont"><i class="fa fa-check"></i><b>6.3.8</b> 3d graphics -&gt; just don’t</a></li>
<li class="chapter" data-level="6.3.9" data-path="week-5.html"><a href="week-5.html#pie-charts---adjacent-bar-plots"><i class="fa fa-check"></i><b>6.3.9</b> Pie charts -&gt; adjacent bar plots</a></li>
<li class="chapter" data-level="6.3.10" data-path="week-5.html"><a href="week-5.html#difficult-comparisons---put-things-close-on-linear-axes"><i class="fa fa-check"></i><b>6.3.10</b> Difficult comparisons -&gt; put things close on linear axes</a></li>
<li class="chapter" data-level="6.3.11" data-path="week-5.html"><a href="week-5.html#comparisons-hard-to-make-between-plots---use-common-axes"><i class="fa fa-check"></i><b>6.3.11</b> Comparisons hard to make between plots -&gt; use common axes</a></li>
<li class="chapter" data-level="6.3.12" data-path="week-5.html"><a href="week-5.html#legends-hard-to-follow---use-labels"><i class="fa fa-check"></i><b>6.3.12</b> Legends hard to follow -&gt; use labels</a></li>
<li class="chapter" data-level="6.3.13" data-path="week-5.html"><a href="week-5.html#confounders-arent-clear---color-by-confounder"><i class="fa fa-check"></i><b>6.3.13</b> Confounders aren’t clear -&gt; color by confounder</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="week-5.html"><a href="week-5.html#common-data-analytic-fallacies"><i class="fa fa-check"></i><b>6.4</b> Common data analytic fallacies</a><ul>
<li class="chapter" data-level="6.4.1" data-path="week-5.html"><a href="week-5.html#spurious-correlation"><i class="fa fa-check"></i><b>6.4.1</b> Spurious correlation</a></li>
<li class="chapter" data-level="6.4.2" data-path="week-5.html"><a href="week-5.html#outliers"><i class="fa fa-check"></i><b>6.4.2</b> Outliers</a></li>
<li class="chapter" data-level="6.4.3" data-path="week-5.html"><a href="week-5.html#reversing-cause-and-effect"><i class="fa fa-check"></i><b>6.4.3</b> Reversing Cause and Effect</a></li>
<li class="chapter" data-level="6.4.4" data-path="week-5.html"><a href="week-5.html#confounders"><i class="fa fa-check"></i><b>6.4.4</b> Confounders</a></li>
<li class="chapter" data-level="6.4.5" data-path="week-5.html"><a href="week-5.html#simpsons-paradox"><i class="fa fa-check"></i><b>6.4.5</b> Simpson’s Paradox</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="week-5.html"><a href="week-5.html#over-skepticism"><i class="fa fa-check"></i><b>6.5</b> Over-skepticism</a><ul>
<li class="chapter" data-level="6.5.1" data-path="week-5.html"><a href="week-5.html#everything-must-be-causal"><i class="fa fa-check"></i><b>6.5.1</b> Everything must be causal</a></li>
<li class="chapter" data-level="6.5.2" data-path="week-5.html"><a href="week-5.html#nothing-can-be-causal"><i class="fa fa-check"></i><b>6.5.2</b> Nothing can be causal</a></li>
<li class="chapter" data-level="6.5.3" data-path="week-5.html"><a href="week-5.html#you-should-answer-my-question-not-yours"><i class="fa fa-check"></i><b>6.5.3</b> You should answer my question, not yours</a></li>
<li class="chapter" data-level="6.5.4" data-path="week-5.html"><a href="week-5.html#you-used-insert-method-i-dont-use-therefore-the-analysis-is-wrong"><i class="fa fa-check"></i><b>6.5.4</b> You used (insert method I don’t use) therefore the analysis is wrong</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="week-1.html"><a href="week-1.html#additional-resources"><i class="fa fa-check"></i><b>6.6</b> Additional Resources</a></li>
<li class="chapter" data-level="6.7" data-path="week-1.html"><a href="week-1.html#homework"><i class="fa fa-check"></i><b>6.7</b> Homework</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="week-6.html"><a href="week-6.html"><i class="fa fa-check"></i><b>7</b> Week 6</a><ul>
<li class="chapter" data-level="7.1" data-path="week-6.html"><a href="week-6.html#week-6-learning-objectives"><i class="fa fa-check"></i><b>7.1</b> Week 6 Learning objectives</a></li>
<li class="chapter" data-level="7.2" data-path="week-6.html"><a href="week-6.html#what-you-wish-data-looked-like"><i class="fa fa-check"></i><b>7.2</b> What you wish data looked like</a></li>
<li class="chapter" data-level="7.3" data-path="week-6.html"><a href="week-6.html#what-it-actually-looks-like"><i class="fa fa-check"></i><b>7.3</b> What it actually looks like</a></li>
<li class="chapter" data-level="7.4" data-path="week-6.html"><a href="week-6.html#background-on-getting-data"><i class="fa fa-check"></i><b>7.4</b> Background on getting data</a><ul>
<li class="chapter" data-level="7.4.1" data-path="week-6.html"><a href="week-6.html#where-do-data-live"><i class="fa fa-check"></i><b>7.4.1</b> Where do data live?</a></li>
<li class="chapter" data-level="7.4.2" data-path="week-6.html"><a href="week-6.html#best-practices-on-sharing-data"><i class="fa fa-check"></i><b>7.4.2</b> Best practices on sharing data</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="week-6.html"><a href="week-6.html#relative-versus-absolute-paths"><i class="fa fa-check"></i><b>7.5</b> Relative versus absolute paths</a><ul>
<li class="chapter" data-level="7.5.1" data-path="week-6.html"><a href="week-6.html#the-here-package"><i class="fa fa-check"></i><b>7.5.1</b> The <code>here</code> package</a></li>
<li class="chapter" data-level="7.5.2" data-path="week-6.html"><a href="week-6.html#finding-and-creating-files-locally"><i class="fa fa-check"></i><b>7.5.2</b> Finding and creating files locally</a></li>
<li class="chapter" data-level="7.5.3" data-path="week-6.html"><a href="week-6.html#downloading-files"><i class="fa fa-check"></i><b>7.5.3</b> Downloading files</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="week-6.html"><a href="week-6.html#reading-files"><i class="fa fa-check"></i><b>7.6</b> Reading files</a><ul>
<li class="chapter" data-level="7.6.1" data-path="week-6.html"><a href="week-6.html#reading-in-csv-files"><i class="fa fa-check"></i><b>7.6.1</b> Reading in CSV files</a></li>
<li class="chapter" data-level="7.6.2" data-path="week-6.html"><a href="week-6.html#reading-in-excel-files"><i class="fa fa-check"></i><b>7.6.2</b> Reading in Excel files</a></li>
<li class="chapter" data-level="7.6.3" data-path="week-6.html"><a href="week-6.html#reading-in-json-files"><i class="fa fa-check"></i><b>7.6.3</b> Reading in JSON Files</a></li>
<li class="chapter" data-level="7.6.4" data-path="week-6.html"><a href="week-6.html#using-github-api"><i class="fa fa-check"></i><b>7.6.4</b> Using GitHub API</a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="week-6.html"><a href="week-6.html#google-sheets"><i class="fa fa-check"></i><b>7.7</b> Google Sheets</a></li>
<li class="chapter" data-level="7.8" data-path="week-6.html"><a href="week-6.html#databases"><i class="fa fa-check"></i><b>7.8</b> Databases</a><ul>
<li class="chapter" data-level="7.8.1" data-path="week-6.html"><a href="week-6.html#querying-with-dplyr-syntax"><i class="fa fa-check"></i><b>7.8.1</b> Querying with <code>dplyr</code> syntax</a></li>
<li class="chapter" data-level="7.8.2" data-path="week-6.html"><a href="week-6.html#delayed-execution"><i class="fa fa-check"></i><b>7.8.2</b> Delayed execution</a></li>
</ul></li>
<li class="chapter" data-level="7.9" data-path="week-6.html"><a href="week-6.html#apis"><i class="fa fa-check"></i><b>7.9</b> APIs</a></li>
<li class="chapter" data-level="7.10" data-path="week-6.html"><a href="week-6.html#webscraping"><i class="fa fa-check"></i><b>7.10</b> Webscraping</a><ul>
<li class="chapter" data-level="7.10.1" data-path="week-6.html"><a href="week-6.html#css-selectors"><i class="fa fa-check"></i><b>7.10.1</b> CSS Selectors</a></li>
</ul></li>
<li class="chapter" data-level="7.11" data-path="week-6.html"><a href="week-6.html#google-ing"><i class="fa fa-check"></i><b>7.11</b> Google-ing</a></li>
<li class="chapter" data-level="7.12" data-path="week-1.html"><a href="week-1.html#additional-resources"><i class="fa fa-check"></i><b>7.12</b> Additional Resources</a></li>
<li class="chapter" data-level="7.13" data-path="week-1.html"><a href="week-1.html#homework"><i class="fa fa-check"></i><b>7.13</b> Homework</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="week-7.html"><a href="week-7.html"><i class="fa fa-check"></i><b>8</b> Week 7</a><ul>
<li class="chapter" data-level="8.1" data-path="week-7.html"><a href="week-7.html#week-7-learning-objectives"><i class="fa fa-check"></i><b>8.1</b> Week 7 Learning objectives</a></li>
<li class="chapter" data-level="8.2" data-path="week-7.html"><a href="week-7.html#a-framework-for-exploratory-analysis"><i class="fa fa-check"></i><b>8.2</b> A framework for exploratory analysis</a><ul>
<li class="chapter" data-level="8.2.1" data-path="week-7.html"><a href="week-7.html#do-you-have-the-right-question"><i class="fa fa-check"></i><b>8.2.1</b> Do you have the right question?</a></li>
<li class="chapter" data-level="8.2.2" data-path="week-7.html"><a href="week-7.html#do-you-have-the-right-data"><i class="fa fa-check"></i><b>8.2.2</b> Do you have the right data?</a></li>
<li class="chapter" data-level="8.2.3" data-path="week-7.html"><a href="week-7.html#can-you-sketch-a-solution-to-the-question-you-care-about"><i class="fa fa-check"></i><b>8.2.3</b> Can you sketch a solution to the question you care about?</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="week-7.html"><a href="week-7.html#some-general-eda-principles"><i class="fa fa-check"></i><b>8.3</b> Some general EDA principles</a><ul>
<li class="chapter" data-level="8.3.1" data-path="week-7.html"><a href="week-7.html#check-the-packaging"><i class="fa fa-check"></i><b>8.3.1</b> Check the packaging</a></li>
<li class="chapter" data-level="8.3.2" data-path="week-7.html"><a href="week-7.html#rectangle-your-data"><i class="fa fa-check"></i><b>8.3.2</b> Rectangle your data</a></li>
<li class="chapter" data-level="8.3.3" data-path="week-7.html"><a href="week-7.html#look-at-the-top-and-bottom"><i class="fa fa-check"></i><b>8.3.3</b> Look at the top and bottom</a></li>
<li class="chapter" data-level="8.3.4" data-path="week-7.html"><a href="week-7.html#always-be-counting"><i class="fa fa-check"></i><b>8.3.4</b> Always be counting</a></li>
<li class="chapter" data-level="8.3.5" data-path="week-7.html"><a href="week-7.html#make-a-plot"><i class="fa fa-check"></i><b>8.3.5</b> Make a plot</a></li>
<li class="chapter" data-level="8.3.6" data-path="week-7.html"><a href="week-7.html#validate-with-an-external-data-source"><i class="fa fa-check"></i><b>8.3.6</b> Validate with an external data source</a></li>
<li class="chapter" data-level="8.3.7" data-path="week-7.html"><a href="week-7.html#try-the-easy-solution"><i class="fa fa-check"></i><b>8.3.7</b> Try the easy solution</a></li>
<li class="chapter" data-level="8.3.8" data-path="week-7.html"><a href="week-7.html#follow-up"><i class="fa fa-check"></i><b>8.3.8</b> Follow up</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="week-7.html"><a href="week-7.html#organizing-an-eda"><i class="fa fa-check"></i><b>8.4</b> Organizing an EDA</a></li>
<li class="chapter" data-level="8.5" data-path="week-1.html"><a href="week-1.html#additional-resources"><i class="fa fa-check"></i><b>8.5</b> Additional Resources</a></li>
<li class="chapter" data-level="8.6" data-path="week-1.html"><a href="week-1.html#homework"><i class="fa fa-check"></i><b>8.6</b> Homework</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="week-8.html"><a href="week-8.html"><i class="fa fa-check"></i><b>9</b> Week 8</a><ul>
<li class="chapter" data-level="9.1" data-path="week-8.html"><a href="week-8.html#week-8-learning-objectives"><i class="fa fa-check"></i><b>9.1</b> Week 8 Learning objectives</a></li>
<li class="chapter" data-level="9.2" data-path="week-8.html"><a href="week-8.html#a-framework-for-modeling"><i class="fa fa-check"></i><b>9.2</b> A framework for modeling</a><ul>
<li class="chapter" data-level="9.2.1" data-path="week-8.html"><a href="week-8.html#identify-your-goal"><i class="fa fa-check"></i><b>9.2.1</b> Identify your goal</a></li>
<li class="chapter" data-level="9.2.2" data-path="week-8.html"><a href="week-8.html#form-an-analysis-plan"><i class="fa fa-check"></i><b>9.2.2</b> Form an analysis plan</a></li>
<li class="chapter" data-level="9.2.3" data-path="week-8.html"><a href="week-8.html#model-signal"><i class="fa fa-check"></i><b>9.2.3</b> Model signal</a></li>
<li class="chapter" data-level="9.2.4" data-path="week-8.html"><a href="week-8.html#account-for-artifacts"><i class="fa fa-check"></i><b>9.2.4</b> Account for artifacts</a></li>
<li class="chapter" data-level="9.2.5" data-path="week-8.html"><a href="week-8.html#build-models-up-sequentially"><i class="fa fa-check"></i><b>9.2.5</b> Build models up sequentially</a></li>
<li class="chapter" data-level="9.2.6" data-path="week-8.html"><a href="week-8.html#model-uncertainty"><i class="fa fa-check"></i><b>9.2.6</b> Model uncertainty</a></li>
<li class="chapter" data-level="9.2.7" data-path="week-8.html"><a href="week-8.html#compare-to-your-analysis-plan"><i class="fa fa-check"></i><b>9.2.7</b> Compare to your analysis plan</a></li>
<li class="chapter" data-level="9.2.8" data-path="week-8.html"><a href="week-8.html#understand-incentives"><i class="fa fa-check"></i><b>9.2.8</b> Understand incentives</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="week-1.html"><a href="week-1.html#additional-resources"><i class="fa fa-check"></i><b>9.3</b> Additional Resources</a></li>
<li class="chapter" data-level="9.4" data-path="week-1.html"><a href="week-1.html#homework"><i class="fa fa-check"></i><b>9.4</b> Homework</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="week-9.html"><a href="week-9.html"><i class="fa fa-check"></i><b>10</b> Week 9</a><ul>
<li class="chapter" data-level="10.1" data-path="week-9.html"><a href="week-9.html#week-9-learning-objectives"><i class="fa fa-check"></i><b>10.1</b> Week 9 Learning objectives</a></li>
<li class="chapter" data-level="10.2" data-path="week-9.html"><a href="week-9.html#story-telling-in-data-analysis"><i class="fa fa-check"></i><b>10.2</b> Story Telling in Data Analysis</a><ul>
<li class="chapter" data-level="10.2.1" data-path="week-9.html"><a href="week-9.html#the-central-dramatic-argument"><i class="fa fa-check"></i><b>10.2.1</b> The Central Dramatic Argument</a></li>
<li class="chapter" data-level="10.2.2" data-path="week-9.html"><a href="week-9.html#thematic-structure-and-causality"><i class="fa fa-check"></i><b>10.2.2</b> Thematic structure and causality</a></li>
<li class="chapter" data-level="10.2.3" data-path="week-9.html"><a href="week-9.html#format"><i class="fa fa-check"></i><b>10.2.3</b> Format</a></li>
<li class="chapter" data-level="10.2.4" data-path="week-9.html"><a href="week-9.html#trust-and-belief"><i class="fa fa-check"></i><b>10.2.4</b> Trust and Belief</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="week-9.html"><a href="week-9.html#the-journey-to-interesting-and-true"><i class="fa fa-check"></i><b>10.3</b> The journey to interesting and true</a></li>
<li class="chapter" data-level="10.4" data-path="week-9.html"><a href="week-9.html#data-analysis-papers"><i class="fa fa-check"></i><b>10.4</b> Data Analysis Papers</a><ul>
<li class="chapter" data-level="10.4.1" data-path="week-9.html"><a href="week-9.html#how-do-you-know-when-to-start-writing"><i class="fa fa-check"></i><b>10.4.1</b> How do you know when to start writing?</a></li>
<li class="chapter" data-level="10.4.2" data-path="week-9.html"><a href="week-9.html#structure"><i class="fa fa-check"></i><b>10.4.2</b> Structure</a></li>
<li class="chapter" data-level="10.4.3" data-path="week-9.html"><a href="week-9.html#titles"><i class="fa fa-check"></i><b>10.4.3</b> Titles</a></li>
<li class="chapter" data-level="10.4.4" data-path="week-9.html"><a href="week-9.html#abstracts"><i class="fa fa-check"></i><b>10.4.4</b> Abstracts</a></li>
<li class="chapter" data-level="10.4.5" data-path="week-9.html"><a href="week-9.html#introductions"><i class="fa fa-check"></i><b>10.4.5</b> Introductions</a></li>
<li class="chapter" data-level="10.4.6" data-path="week-9.html"><a href="week-9.html#results"><i class="fa fa-check"></i><b>10.4.6</b> Results</a></li>
<li class="chapter" data-level="10.4.7" data-path="week-9.html"><a href="week-9.html#methods-sections"><i class="fa fa-check"></i><b>10.4.7</b> Methods sections</a></li>
<li class="chapter" data-level="10.4.8" data-path="week-9.html"><a href="week-9.html#conclusions-and-discussion"><i class="fa fa-check"></i><b>10.4.8</b> Conclusions and discussion</a></li>
<li class="chapter" data-level="10.4.9" data-path="week-9.html"><a href="week-9.html#supplementary-material"><i class="fa fa-check"></i><b>10.4.9</b> Supplementary material</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="week-9.html"><a href="week-9.html#a-few-matters-of-form"><i class="fa fa-check"></i><b>10.5</b> A few matters of form</a></li>
<li class="chapter" data-level="10.6" data-path="week-1.html"><a href="week-1.html#additional-resources"><i class="fa fa-check"></i><b>10.6</b> Additional Resources</a></li>
<li class="chapter" data-level="10.7" data-path="week-1.html"><a href="week-1.html#homework"><i class="fa fa-check"></i><b>10.7</b> Homework</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="week-10.html"><a href="week-10.html"><i class="fa fa-check"></i><b>11</b> Week 10</a><ul>
<li class="chapter" data-level="11.1" data-path="week-10.html"><a href="week-10.html#week-10-learning-objectives"><i class="fa fa-check"></i><b>11.1</b> Week 10 Learning objectives</a></li>
<li class="chapter" data-level="11.2" data-path="week-10.html"><a href="week-10.html#exploratoy-vs-expository"><i class="fa fa-check"></i><b>11.2</b> Exploratoy vs expository</a></li>
<li class="chapter" data-level="11.3" data-path="week-10.html"><a href="week-10.html#creating-expository-graphs"><i class="fa fa-check"></i><b>11.3</b> Creating Expository Graphs</a><ul>
<li class="chapter" data-level="11.3.1" data-path="week-10.html"><a href="week-10.html#background-color"><i class="fa fa-check"></i><b>11.3.1</b> Background color</a></li>
<li class="chapter" data-level="11.3.2" data-path="week-10.html"><a href="week-10.html#axis-titles-and-axis-labels"><i class="fa fa-check"></i><b>11.3.2</b> Axis titles and axis labels</a></li>
<li class="chapter" data-level="11.3.3" data-path="week-10.html"><a href="week-10.html#legends-or-not"><i class="fa fa-check"></i><b>11.3.3</b> Legends (or not!)</a></li>
<li class="chapter" data-level="11.3.4" data-path="week-10.html"><a href="week-10.html#titles-with-color"><i class="fa fa-check"></i><b>11.3.4</b> Titles (with color!)</a></li>
<li class="chapter" data-level="11.3.5" data-path="week-10.html"><a href="week-10.html#adding-a-model-fit"><i class="fa fa-check"></i><b>11.3.5</b> Adding a model fit</a></li>
<li class="chapter" data-level="11.3.6" data-path="week-10.html"><a href="week-10.html#figure-captions"><i class="fa fa-check"></i><b>11.3.6</b> Figure captions</a></li>
<li class="chapter" data-level="11.3.7" data-path="week-10.html"><a href="week-10.html#colors-and-fonts"><i class="fa fa-check"></i><b>11.3.7</b> Colors and fonts</a></li>
<li class="chapter" data-level="11.3.8" data-path="week-10.html"><a href="week-10.html#multi-panel-plots"><i class="fa fa-check"></i><b>11.3.8</b> Multi-panel plots</a></li>
<li class="chapter" data-level="11.3.9" data-path="week-10.html"><a href="week-10.html#miscellaneous-advice"><i class="fa fa-check"></i><b>11.3.9</b> Miscellaneous Advice</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="week-10.html"><a href="week-10.html#creating-expository-tables"><i class="fa fa-check"></i><b>11.4</b> Creating Expository Tables</a><ul>
<li class="chapter" data-level="11.4.1" data-path="week-10.html"><a href="week-10.html#table-1"><i class="fa fa-check"></i><b>11.4.1</b> Table 1</a></li>
<li class="chapter" data-level="11.4.2" data-path="week-10.html"><a href="week-10.html#color-in-tables"><i class="fa fa-check"></i><b>11.4.2</b> Color in tables</a></li>
<li class="chapter" data-level="11.4.3" data-path="week-10.html"><a href="week-10.html#captions"><i class="fa fa-check"></i><b>11.4.3</b> Captions</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="week-10.html"><a href="week-10.html#scientific-graphics-vs-infographics"><i class="fa fa-check"></i><b>11.5</b> Scientific graphics vs infographics</a></li>
<li class="chapter" data-level="11.6" data-path="week-1.html"><a href="week-1.html#additional-resources"><i class="fa fa-check"></i><b>11.6</b> Additional Resources</a></li>
<li class="chapter" data-level="11.7" data-path="week-1.html"><a href="week-1.html#homework"><i class="fa fa-check"></i><b>11.7</b> Homework</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Advanced Data Science 2020</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="week-6" class="section level1">
<h1><span class="header-section-number">7</span> Week 6</h1>
<div id="week-6-learning-objectives" class="section level2">
<h2><span class="header-section-number">7.1</span> Week 6 Learning objectives</h2>
<div class="keyidea">
<p>At the end of this lesson you will be able to:</p>
<ul>
<li>Define a tidy data set</li>
<li>Name the parts of a shareable data set</li>
<li>Download data from multiple sources</li>
<li>Import data from multiple sources</li>
</ul>
</div>
<p><em>This lecture includes material from Stephanie Hicks <a href="https://jhu-advdatasci.github.io/2019/lectures/04-gettingdata-api.html">lecture</a> on getting data</em></p>
</div>
<div id="what-you-wish-data-looked-like" class="section level2">
<h2><span class="header-section-number">7.2</span> What you wish data looked like</h2>
<p>The first step in almost every data practical data science project is to collect the data that you will need to perform your analysis, clean the data, and explore the key characteristics of the data set. It has been said in many different ways that 80% of data science is data cleaning - and the other 20% is spent complaining about it…</p>
<blockquote class="twitter-tweet">
<p lang="en" dir="ltr">
In Data Science, 80% of time spent prepare data, 20% of time spent complain about need for prepare data.
</p>
— Big Data Borat (<span class="citation">@BigDataBorat</span>) <a href="https://twitter.com/BigDataBorat/status/306596352991830016?ref_src=twsrc%5Etfw">February 27, 2013</a>
</blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<p>This is unfortunately a truism that hasn’t changed too much despite the best efforts to develop a set of tools that make it easier than ever to collect, manipulate, clean, and explore data.</p>
<p>One important reason is that data collection is often done without data analysis in mind. For example, electronic health record data may be initially collected for the purpose of billing, rather than research. Social media data may be collected to allow communication, but will not be structured for analysis.</p>
<p>This means that a fair amount of work will be transforming data from whatever format you find it in the wild into data that you can use to do analysis. Depending on the type of software you use, you will ultimately need to format the data in different ways.</p>
<p>However, there has been a major effort to standardize a lot of statistical analysis software - particularly in the R programming language - around the idea of “tidy data”. <a href="https://vita.had.co.nz/papers/tidy-data.pdf">Tidy data</a> was originally defined by Hadley Wickham in a now classic paper. According to Wickham, data is “tidy” if it has the following properties:</p>
<ol style="list-style-type: decimal">
<li>Each variable forms a column.</li>
<li>Each observation forms a row.</li>
<li>Each type of observational unit forms a table.</li>
</ol>
<p>If you have multiple tables, an additional assumption of tidy data that we often use is that:</p>
<ol start="4" style="list-style-type: decimal">
<li>Each table contains a set of unique ids that allow observations to be linked</li>
</ol>
<p>This formalism is extremely useful for a wide range of data types and thanks to significant investment by Rstudio and their extended network, there are now a large number of tools - called the <a href="https://www.tidyverse.org/">tidyverse</a> - that either facilitate the creation of tidy data or accept tidy data as a default input format.</p>
<p><img src="http://jtleek.com/advdatasci/imgs/tidy-data-example.png" /></p>
<p>This is often how you wish data would be formatted. But not always! For example, genomic data is often best analyzed using the <a href="https://www.bioconductor.org/">Bioconductor</a> suite of software that <a href="https://www.nature.com/articles/nmeth.3252">often assumes</a> three (not-tidy by the above definition) data sets:</p>
<p><img src="https://media.springernature.com/lw685/springer-static/image/art%3A10.1038%2Fnmeth.3252/MediaObjects/41592_2015_Article_BFnmeth3252_Fig2_HTML.jpg" /></p>
<p>Regardless, the first steps in any data science project after the question and audience have been settled are usually around collecting, reformatting, and exploring data. These steps are hyper critical to the success of a data analysis and - much to the chagrin of statisticians - are often <a href="https://www.nature.com/articles/s41598-020-59516-z">very influential on the ultimate results of a data analysis</a>. So it usually makes sense to consider several alternative processing approaches particularly when dealing with complicated or sensitive data collection technolgoies.</p>
</div>
<div id="what-it-actually-looks-like" class="section level2">
<h2><span class="header-section-number">7.3</span> What it actually looks like</h2>
<p>So what does data actually look like? As Wickham points out in his Tidy Data paper:</p>
<blockquote>
<p>tidy datasets are all alike but every messy dataset is messy in its own way.</p>
</blockquote>
<p>It would take entire courses to cover all the ways messy data exists in the wild and the massive number of tools that have been developed to manipulate these data. Here we will simply give an overview of some of the most widely used/common denominator tools. However, your mileage will vary considerably depending on the field you work in.</p>
<p>The most common type of “messy” data that you will encounter, nearly independent of which field you choose to work in, are data in spreadsheets. These are nearly infinite in how ugly they can get.</p>
<p><img src="http://jtleek.com/advdatasci/imgs/enron-spreadsheet.png" /></p>
<p>You may also encounter free text files, sometimes called “flat” files, in a variety of formats. For example a health record may be stored as a plain text file (or in one of several proprietary formats):</p>
<p><img src="http://jtleek.com/advdatasci/imgs/ehr.png" /></p>
<p>Increasingly, data from the web is stored in <a href="https://en.wikipedia.org/wiki/JSON">JSON</a> format. If you collect data directly from application programming interfaces, this is almost certainly how your data will arrive.</p>
<p><img src="http://jtleek.com/advdatasci/imgs/twitter-api.png" /></p>
<p>Finally, if you work in a subfield with specialized measurement tools you will encounter raw data in a variety of very specific formats. For example, much of the data from high-throughput short-read sequencing appears in the FASTQ format, which may be a 3 gigabyte or more flat or zipped file formatted in a very specific way to report short “reads” and their quality from the genome.</p>
<p><img src="http://jtleek.com/advdatasci/imgs/fastq.png" /></p>
<p>Unfortunately, unless you have your own experimental research lab, start your own company, or lead the data team for your organization, you will be stuck with the raw data that arrives. This can be <em>extremely</em> frustrating, but it is important to get good at managing data that is realistically complex if you want to be a practicing data scientist. If you need to vent, you can always check out the hashtag <a href="https://twitter.com/search?q=%23otherpeoplesdata&amp;src=typed_query">#otherpeoplesdata</a> on Twitter for commiseration and humor.</p>
<blockquote class="twitter-tweet">
<p lang="en" dir="ltr">
<em>squints at the files I was sent</em> <a href="https://twitter.com/hashtag/otherpeoplesdata?src=hash&amp;ref_src=twsrc%5Etfw">#otherpeoplesdata</a> <a href="https://t.co/cB3PC6Y0Yk">pic.twitter.com/cB3PC6Y0Yk</a>
</p>
— Dave Hemprich-Bennett (<span class="citation">@hammerheadbat</span>) <a href="https://twitter.com/hammerheadbat/status/929348291229253634?ref_src=twsrc%5Etfw">November 11, 2017</a>
</blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
</div>
<div id="background-on-getting-data" class="section level2">
<h2><span class="header-section-number">7.4</span> Background on getting data</h2>
<p>Regardless of how the data is formatted, the first step in your data analysis will be to collect the data, organize it, read it into R and format it so that you can perform your analysis. We are going to cover some of the most common ways of getting data here, and this will necessarily be pretty R specific, but this is the step that is most likely to be field specific so you may need to follow tutorials within your field. A good place to start is always “file format extension rstats package” on Google.</p>
<div id="where-do-data-live" class="section level3">
<h3><span class="header-section-number">7.4.1</span> Where do data live?</h3>
<p>Data lives anywhere and everywhere. Data
might be stored simply in a <code>.csv</code> or <code>.txt</code>
file. Data might be stored in an Excel or
Google Spreadsheet. Data might be stored in
large databases that require users to write
special functions to interact with to extract
the data they are interested in.</p>
<p>For example, you may have heard of the terms
<code>mySQL</code> or <code>MongoDB</code>.</p>
<p>From <a href="https://en.wikipedia.org/wiki/MySQL">Wikipedia, MySQL</a>
is defined as <em>an open-source relational database management system (RDBMS). Its name is a combination of “My”, the name of co-founder Michael Widenius’s daughter,[7] and “SQL”, the abbreviation for Structured Query Language.</em>.</p>
<p>From <a href="https://en.wikipedia.org/wiki/MongoDB">Wikipeda, MongoDB</a>
is defined as <em>“a free and open-source cross-platform document-oriented database program. Classified as a NoSQL database program, MongoDB uses JSON-like documents with schemata.”</em></p>
<p>So after reading that, we get the sense that there
are multiple ways large databases can be structured,
data can be formatted and interacted with.
In addition, we see that database programs
(e.g. MySQL and MongoDB) can also interact
with each other.</p>
<p><img src="https://github.com/jtleek/advdatasci/raw/master/imgs/databases.png" /><!-- --></p>
<p>We will learn more about <code>SQL</code> and <code>JSON</code> in a bit.</p>
</div>
<div id="best-practices-on-sharing-data" class="section level3">
<h3><span class="header-section-number">7.4.2</span> Best practices on sharing data</h3>
<p>When you are getting data, you should be thinking about how you will organize it, both for your self and for sharing with others. We wrote a paper called: <a href="https://peerj.com/preprints/3139v5.pdf"><em>How to share data for collaboration</em></a> where we provide some guidelines for sharing data:</p>
<blockquote>
<p>We highlight the need to provide raw data to the statistician, the importance of consistent formatting, and the necessity of including all essential experimental information and pre-processing steps carried out to the statistician. With these guidelines we hope to avoid errors and delays in data analysis. the importance of consistent formatting, and the necessity of including all essential experimental information and pre-processing steps carried out to the statistician.
<img src="https://github.com/jtleek/advdatasci/raw/master/imgs/ellis-datashare.png" /><!-- --></p>
</blockquote>
<p>The easiest data analyses start with data shared in this format and you will make a lot of friends among your collaborators if you organize data collect in this way. Specifically:</p>
<ol style="list-style-type: decimal">
<li>The raw data (or the rawest form of the data to which you have access)
<ul>
<li>Should not have modified, removed or summarized any data; Ran no software on data</li>
<li>e.g. strange binary file your measurement machine spits out</li>
<li>e.g. complicated JSON file you scrapped from Twitter Application Programming Interfaces (API)</li>
<li>e.g. hand-entered numbers you collected looking through a microscope</li>
</ul></li>
<li>A clean data set
<ul>
<li>This may or may not be transforming data into a <code>tidy</code> dataset, but possibly yes</li>
</ul></li>
<li>A code book describing each variable and its values in the clean or tidy data set.
<ul>
<li>More detailed information about the measurements in the data set (e.g. units, experimental design, summary choices made)</li>
<li>Doesn’t quite fit into the column names in the spreadsheet</li>
<li>Often reported in a <code>.md</code>, <code>.txt</code> or Word file.</li>
</ul></li>
</ol>
<p><img src="https://github.com/jtleek/advdatasci/raw/master/imgs/code-book.png" /><!-- --></p>
<ol start="4" style="list-style-type: decimal">
<li>An explicit and exact recipe you used to go from 1 -&gt; 2,3</li>
</ol>
<p><img src="https://github.com/jtleek/advdatasci/raw/master/imgs/recipe-best.png" /><!-- --></p>
</div>
</div>
<div id="relative-versus-absolute-paths" class="section level2">
<h2><span class="header-section-number">7.5</span> Relative versus absolute paths</h2>
<p>When you are starting a data analysis, you have
already learned about the use of <code>.Rproj</code> files.
When you open up a <code>.Rproj</code> file, RStudio changes
the path (location on your computer) to the <code>.Rproj</code>
location.</p>
<p>After opening up a <code>.Rproj</code> file, you can test this
by</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="week-6.html#cb95-1"></a><span class="kw">getwd</span>()</span></code></pre></div>
<p>When you open up someone else’s R code or analysis,
you might also see the <code>setwd()</code> function being used
which explicitly tells R to change the absolute path
or absolute location of which directory to move into.</p>
<p>For example, say I want to clone a GitHub repo from
Roger, which has 100 R script files, and in every
one of those files at the top is:</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="week-6.html#cb96-1"></a><span class="kw">setwd</span>(<span class="st">&quot;C:\Users\Roger\path\only</span><span class="ch">\t</span><span class="st">hat\Roger\has&quot;</span>)</span></code></pre></div>
<p>The problem is, if I want to use his code, I will
need to go and hand-edit every single one of those
paths (<code>C:\Users\Roger\path\only\that\Roger\has</code>)
to the path that I want to use on my computer
or wherever I saved the folder on my computer (e.g. 
<code>/Users/Stephanie/Documents/path/only/I/have</code>).</p>
<ol style="list-style-type: decimal">
<li>This is an unsustainable practice.</li>
<li>I can go in and manually edit the path, but this
assumes I know how to set a working directory. Not
everyone does.</li>
</ol>
<p>So instead of absolute paths:</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="week-6.html#cb97-1"></a><span class="kw">setwd</span>(<span class="st">&quot;/Users/jtleek/data&quot;</span>)</span>
<span id="cb97-2"><a href="week-6.html#cb97-2"></a><span class="kw">setwd</span>(<span class="st">&quot;~/Desktop/files/data&quot;</span>)</span>
<span id="cb97-3"><a href="week-6.html#cb97-3"></a><span class="kw">setwd</span>(<span class="st">&quot;C:</span><span class="ch">\\</span><span class="st">Users</span><span class="ch">\\</span><span class="st">Andrew</span><span class="ch">\\</span><span class="st">Downloads&quot;</span>)</span></code></pre></div>
<p>A better idea is to use relative paths:</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="week-6.html#cb98-1"></a><span class="kw">setwd</span>(<span class="st">&quot;../data&quot;</span>)</span>
<span id="cb98-2"><a href="week-6.html#cb98-2"></a><span class="kw">setwd</span>(<span class="st">&quot;../files&quot;</span>)</span>
<span id="cb98-3"><a href="week-6.html#cb98-3"></a><span class="kw">setwd</span>(<span class="st">&quot;..</span><span class="ch">\t</span><span class="st">mp&quot;</span>)</span></code></pre></div>
<p>Within R, an even better idea is to use the
<a href="https://github.com/r-lib/here">here</a>
R package will recognize the top-level directory
of a Git repo and supports building all paths
relative to that. For more on project-oriented
workflow suggestions, read
<a href="https://www.tidyverse.org/articles/2017/12/workflow-vs-script/">this post</a>
from Jenny Bryan.</p>
<div id="the-here-package" class="section level3">
<h3><span class="header-section-number">7.5.1</span> The <code>here</code> package</h3>
<p>In her post, she writes</p>
<blockquote>
<p>“I suggest organizing each data analysis into a project: a folder on your computer that holds all the files relevant to that particular piece of work.”
Instead of using <code>setwd()</code> at the top your <code>.R</code> or <code>.Rmd</code> file, she suggests:</p>
</blockquote>
<ul>
<li>Organize each logical project into a folder on your computer.</li>
<li>Make sure the top-level folder advertises itself as such. This can be as simple as having an empty file named <code>.here</code>. Or, if you use RStudio and/or Git, those both leave characteristic files behind that will get the job done.</li>
<li>Use the <code>here()</code> function from the <code>here</code> package to build the path when you read or write a file. Create paths relative to the top-level directory.</li>
<li>Whenever you work on this project, launch the R process from the project’s top-level directory. If you launch R from the shell, <code>cd</code> to the correct folder first.</li>
</ul>
<p>Let’s test this out. We can use <code>getwd()</code> to see our current
working directory path and the files available using <code>list.file()</code></p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="week-6.html#cb99-1"></a><span class="kw">getwd</span>()</span></code></pre></div>
<pre><code>## [1] &quot;/cloud/project&quot;</code></pre>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="week-6.html#cb101-1"></a><span class="kw">list.files</span>()</span></code></pre></div>
<pre><code>##  [1] &quot;_book&quot;                 &quot;_bookdown_files&quot;       &quot;_bookdown.yml&quot;        
##  [4] &quot;_output.yml&quot;           &quot;01-week_files&quot;         &quot;01-week.md&quot;           
##  [7] &quot;01-week.Rmd&quot;           &quot;01-week.utf8.md&quot;       &quot;02-week_cache&quot;        
## [10] &quot;02-week_files&quot;         &quot;02-week.md&quot;            &quot;02-week.Rmd&quot;          
## [13] &quot;02-week.utf8.md&quot;       &quot;03-week.md&quot;            &quot;03-week.Rmd&quot;          
## [16] &quot;03-week.utf8.md&quot;       &quot;04-week.md&quot;            &quot;04-week.Rmd&quot;          
## [19] &quot;04-week.utf8.md&quot;       &quot;05-week_files&quot;         &quot;05-week.md&quot;           
## [22] &quot;05-week.Rmd&quot;           &quot;05-week.utf8.md&quot;       &quot;06-week_files&quot;        
## [25] &quot;06-week.Rmd&quot;           &quot;07-week.Rmd&quot;           &quot;08-week_cache&quot;        
## [28] &quot;08-week_files&quot;         &quot;08-week.Rmd&quot;           &quot;09-week.Rmd&quot;          
## [31] &quot;10-week_files&quot;         &quot;10-week.Rmd&quot;           &quot;ads2020.rds&quot;          
## [34] &quot;ads2020.Rproj&quot;         &quot;data&quot;                  &quot;docs&quot;                 
## [37] &quot;fyi.png&quot;               &quot;index.md&quot;              &quot;index.Rmd&quot;            
## [40] &quot;index.utf8.md&quot;         &quot;jhsph ads.png&quot;         &quot;key.png&quot;              
## [43] &quot;Lightbulb.png&quot;         &quot;Live-code.png&quot;         &quot;logo&quot;                 
## [46] &quot;private&quot;               &quot;README.md&quot;             &quot;render1f455586ef0.rds&quot;
## [49] &quot;style.css&quot;             &quot;test.png&quot;              &quot;Your-turn.png&quot;</code></pre>
<p>OK so our current location is in the <code>/cloud/project</code> directory. Using the here package we can see that here points to this base directory.</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="week-6.html#cb103-1"></a><span class="kw">library</span>(here)</span></code></pre></div>
<pre><code>## here() starts at /cloud/project</code></pre>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="week-6.html#cb105-1"></a><span class="kw">here</span>()</span></code></pre></div>
<pre><code>## [1] &quot;/cloud/project&quot;</code></pre>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="week-6.html#cb107-1"></a><span class="kw">list.files</span>(here<span class="op">::</span><span class="kw">here</span>())</span></code></pre></div>
<pre><code>##  [1] &quot;_book&quot;                 &quot;_bookdown_files&quot;       &quot;_bookdown.yml&quot;        
##  [4] &quot;_output.yml&quot;           &quot;01-week_files&quot;         &quot;01-week.md&quot;           
##  [7] &quot;01-week.Rmd&quot;           &quot;01-week.utf8.md&quot;       &quot;02-week_cache&quot;        
## [10] &quot;02-week_files&quot;         &quot;02-week.md&quot;            &quot;02-week.Rmd&quot;          
## [13] &quot;02-week.utf8.md&quot;       &quot;03-week.md&quot;            &quot;03-week.Rmd&quot;          
## [16] &quot;03-week.utf8.md&quot;       &quot;04-week.md&quot;            &quot;04-week.Rmd&quot;          
## [19] &quot;04-week.utf8.md&quot;       &quot;05-week_files&quot;         &quot;05-week.md&quot;           
## [22] &quot;05-week.Rmd&quot;           &quot;05-week.utf8.md&quot;       &quot;06-week_files&quot;        
## [25] &quot;06-week.Rmd&quot;           &quot;07-week.Rmd&quot;           &quot;08-week_cache&quot;        
## [28] &quot;08-week_files&quot;         &quot;08-week.Rmd&quot;           &quot;09-week.Rmd&quot;          
## [31] &quot;10-week_files&quot;         &quot;10-week.Rmd&quot;           &quot;ads2020.rds&quot;          
## [34] &quot;ads2020.Rproj&quot;         &quot;data&quot;                  &quot;docs&quot;                 
## [37] &quot;fyi.png&quot;               &quot;index.md&quot;              &quot;index.Rmd&quot;            
## [40] &quot;index.utf8.md&quot;         &quot;jhsph ads.png&quot;         &quot;key.png&quot;              
## [43] &quot;Lightbulb.png&quot;         &quot;Live-code.png&quot;         &quot;logo&quot;                 
## [46] &quot;private&quot;               &quot;README.md&quot;             &quot;render1f455586ef0.rds&quot;
## [49] &quot;style.css&quot;             &quot;test.png&quot;              &quot;Your-turn.png&quot;</code></pre>
<p>We can now create a <code>data</code> folder if it doesn’t already exist and see how to create a link to the data directory using the here package:</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="week-6.html#cb109-1"></a><span class="cf">if</span>(<span class="op">!</span><span class="kw">file.exists</span>(<span class="st">&quot;data&quot;</span>)){<span class="kw">dir.create</span>(<span class="st">&quot;data&quot;</span>)}</span>
<span id="cb109-2"><a href="week-6.html#cb109-2"></a><span class="kw">list.files</span>(<span class="kw">here</span>(<span class="st">&quot;data&quot;</span>))</span></code></pre></div>
<pre><code>##  [1] &quot;2020-10-05-cameras.csv&quot;  &quot;2020-10-05-cameras.xlsx&quot;
##  [3] &quot;2020-10-11-cameras.csv&quot;  &quot;2020-10-12-cameras.csv&quot; 
##  [5] &quot;2020-10-21-cameras.csv&quot;  &quot;2020-10-26-cameras.csv&quot; 
##  [7] &quot;2020-11-02-cameras.csv&quot;  &quot;cameras.csv&quot;            
##  [9] &quot;Chinook.sqlite&quot;          &quot;repos.json&quot;</code></pre>
<p>Now we see that using the <code>here::here()</code> function is a
<em>relative</em> path (relative to the <code>.Rproj</code> file in our home directory. We also see there is a <code>cameras.csv</code> file in
the <code>data</code> folder. Let’s read it into R with the <code>readr</code> package.</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="week-6.html#cb111-1"></a>df &lt;-<span class="st"> </span>readr<span class="op">::</span><span class="kw">read_csv</span>(<span class="kw">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;cameras.csv&quot;</span>))</span></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   address = col_character(),
##   direction = col_character(),
##   street = col_character(),
##   crossStreet = col_character(),
##   intersection = col_character(),
##   `Location 1` = col_character(),
##   `2010 Census Neighborhoods` = col_double(),
##   `2010 Census Wards Precincts` = col_double(),
##   `Zip Codes` = col_double()
## )</code></pre>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="week-6.html#cb113-1"></a>df</span></code></pre></div>
<pre><code>## # A tibble: 80 x 9
##    address direction street crossStreet intersection `Location 1`
##    &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt;  &lt;chr&gt;       &lt;chr&gt;        &lt;chr&gt;       
##  1 GARRIS… E/B       &quot;Garr… Wabash Ave  &quot;Garrison \… (39.341209,…
##  2 HILLEN… W/B       &quot;Hill… Forrest St  &quot;Hillen \n … (39.29686, …
##  3 EDMOND… E/B       &quot;Edmo… Woodbridge… &quot;Edmonson\n… (39.293453,…
##  4 YORK R… S/B       &quot;York… Gitting Ave &quot;York Rd \n… (39.370493,…
##  5 RUSSEL… S/B       &quot;Russ… Hamburg St  &quot;Russell\n … (39.279819,…
##  6 S MART… S/B       &quot;MLK … Pratt St    &quot;MLK Jr. Bl… (39.286027,…
##  7 ORLEAN… E/B       &quot;Orle… Linwood Ave &quot;Orleans   … (39.295866,…
##  8 E NORT… W/B       &quot;Nort… Springlake… &quot;Northern P… (39.364311,…
##  9 W COLD… E/B       &quot;Cold… Roland Ave  &quot;Cold Sprin… (39.343906,…
## 10 E NORT… W/B       &quot;Nort… York Road   &quot;Northern P… (39.365146,…
## # … with 70 more rows, and 3 more variables: `2010 Census Neighborhoods` &lt;dbl&gt;,
## #   `2010 Census Wards Precincts` &lt;dbl&gt;, `Zip Codes` &lt;dbl&gt;</code></pre>
<p>We can also ask for the full paths for specific files</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="week-6.html#cb115-1"></a><span class="kw">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;cameras.csv&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;/cloud/project/data/cameras.csv&quot;</code></pre>
<p>The nice thing about the <code>here</code> package is that the above code creates the “correct” path relative to the home directory, regardless of whether the folder is on your computer or not.</p>
</div>
<div id="finding-and-creating-files-locally" class="section level3">
<h3><span class="header-section-number">7.5.2</span> Finding and creating files locally</h3>
<p>If you want to download a file, one way to use the
<code>file.exists()</code>, <code>dir.create()</code> and <code>list.files()</code>
functions.</p>
<ul>
<li><code>file.exists(here("my", "relative", "path"))</code> = logical test if the file exists</li>
<li><code>dir.create(here("my", "relative", "path"))</code> = create a folder</li>
<li><code>list.files(here("my", "relative", "path"))</code> = list contents of folder</li>
</ul>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="week-6.html#cb117-1"></a><span class="cf">if</span>(<span class="op">!</span><span class="kw">file.exists</span>(<span class="kw">here</span>(<span class="st">&quot;my&quot;</span>, <span class="st">&quot;relative&quot;</span>, <span class="st">&quot;path&quot;</span>))){</span>
<span id="cb117-2"><a href="week-6.html#cb117-2"></a>  <span class="kw">dir.create</span>(<span class="kw">here</span>(<span class="st">&quot;my&quot;</span>, <span class="st">&quot;relative&quot;</span>, <span class="st">&quot;path&quot;</span>))</span>
<span id="cb117-3"><a href="week-6.html#cb117-3"></a>}</span>
<span id="cb117-4"><a href="week-6.html#cb117-4"></a><span class="kw">list.files</span>(<span class="kw">here</span>(<span class="st">&quot;my&quot;</span>, <span class="st">&quot;relative&quot;</span>, <span class="st">&quot;path&quot;</span>))</span></code></pre></div>
</div>
<div id="downloading-files" class="section level3">
<h3><span class="header-section-number">7.5.3</span> Downloading files</h3>
<p>Let’s say we wanted to find out where are
all the Fixed Speed Cameras in Baltimore?</p>
<p>To do this, we can use the
<a href="https://data.baltimorecity.gov">Open Baltimore</a>
API which has information on
<a href="https://data.baltimorecity.gov/Transportation/Baltimore-Fixed-Speed-Cameras/dz54-2aru">the locations</a> of fixed speed cameras
in Baltimore.</p>
<p>In case you aren’t familiar with
fixed speed cameras, the website states:</p>
<blockquote>
<p>Motorists who drive aggressively and exceed the posted speed limit by at least 12 miles per hour will receive $40 citations in the mail. These citations are not reported to insurance companies and no license points are assigned. Notification signs will be placed at all speed enforcement locations so that motorists will be aware that they are approaching a speed check zone. The goal of the program is to make the streets of Baltimore safer for everyone by changing aggressive driving behavior. In addition to the eight portable speed enforcement units, the city has retrofitted 50 red light camera locations with the automated speed enforcement technology.</p>
</blockquote>
<p>When we go to the website, we see that
the data can be provided to us as a
<code>.csv</code> file. To download in this data,
we can do the following:</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="week-6.html#cb118-1"></a>file_url &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="st">&quot;https://data.baltimorecity.gov/api/&quot;</span>,</span>
<span id="cb118-2"><a href="week-6.html#cb118-2"></a>                   <span class="st">&quot;views/dz54-2aru/rows.csv?accessType=DOWNLOAD&quot;</span>)</span>
<span id="cb118-3"><a href="week-6.html#cb118-3"></a><span class="kw">download.file</span>(file_url,</span>
<span id="cb118-4"><a href="week-6.html#cb118-4"></a>              <span class="dt">destfile=</span><span class="kw">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;cameras.csv&quot;</span>))</span>
<span id="cb118-5"><a href="week-6.html#cb118-5"></a><span class="kw">list.files</span>(<span class="kw">here</span>(<span class="st">&quot;data&quot;</span>))</span></code></pre></div>
<p>Alternatively, if we want to only download
the file once each time we knit our reproducible
report or homework or project, we can us wrap
the code above into a <code>!file.exists()</code> function.</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="week-6.html#cb119-1"></a>filename =<span class="st"> </span><span class="kw">paste0</span>(<span class="kw">Sys.Date</span>(),<span class="st">&quot;-cameras.csv&quot;</span>)</span>
<span id="cb119-2"><a href="week-6.html#cb119-2"></a><span class="cf">if</span>(<span class="op">!</span><span class="kw">file.exists</span>(<span class="kw">here</span>(<span class="st">&quot;data&quot;</span>, filename))){</span>
<span id="cb119-3"><a href="week-6.html#cb119-3"></a>  file_url &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="st">&quot;https://data.baltimorecity.gov/api/&quot;</span>,</span>
<span id="cb119-4"><a href="week-6.html#cb119-4"></a>                   <span class="st">&quot;views/dz54-2aru/rows.csv?accessType=DOWNLOAD&quot;</span>)</span>
<span id="cb119-5"><a href="week-6.html#cb119-5"></a>  </span>
<span id="cb119-6"><a href="week-6.html#cb119-6"></a>  todays_date =<span class="st"> </span><span class="kw">Sys.Date</span>()</span>
<span id="cb119-7"><a href="week-6.html#cb119-7"></a>  <span class="kw">download.file</span>(file_url,</span>
<span id="cb119-8"><a href="week-6.html#cb119-8"></a>                <span class="dt">destfile=</span><span class="kw">here</span>(<span class="st">&quot;data&quot;</span>,filename))</span>
<span id="cb119-9"><a href="week-6.html#cb119-9"></a>}</span>
<span id="cb119-10"><a href="week-6.html#cb119-10"></a></span>
<span id="cb119-11"><a href="week-6.html#cb119-11"></a>date_downloaded =<span class="st"> </span><span class="kw">Sys.Date</span>()</span>
<span id="cb119-12"><a href="week-6.html#cb119-12"></a>date_downloaded</span></code></pre></div>
<pre><code>## [1] &quot;2020-11-02&quot;</code></pre>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="week-6.html#cb121-1"></a><span class="kw">list.files</span>(<span class="kw">here</span>(<span class="st">&quot;data&quot;</span>))</span></code></pre></div>
<pre><code>##  [1] &quot;2020-10-05-cameras.csv&quot;  &quot;2020-10-05-cameras.xlsx&quot;
##  [3] &quot;2020-10-11-cameras.csv&quot;  &quot;2020-10-12-cameras.csv&quot; 
##  [5] &quot;2020-10-21-cameras.csv&quot;  &quot;2020-10-26-cameras.csv&quot; 
##  [7] &quot;2020-11-02-cameras.csv&quot;  &quot;cameras.csv&quot;            
##  [9] &quot;Chinook.sqlite&quot;          &quot;repos.json&quot;</code></pre>
<p>Here you will notice I also named the file with the date and/or saved another variable with the downloaded date. The reason is that if you are downloading data directly from the internet, it is likely to update and your results may change. It is a good idea to keep track of the data each time you download.</p>
<div class="keyidea">
<p>Always remember to save the date when you download a file from the internet - usually by naming the file with the date. This can prevent reproducibility errors later if the data are updated between when you collect the data and when you</p>
</div>
</div>
</div>
<div id="reading-files" class="section level2">
<h2><span class="header-section-number">7.6</span> Reading files</h2>
<p>Once you have downloaded a file from the internet the next step is reading the data in so you can explore it. In R there are a number of packages that have been developed for most common data types. We will go over a few of them here.</p>
<div id="reading-in-csv-files" class="section level3">
<h3><span class="header-section-number">7.6.1</span> Reading in CSV files</h3>
<p>The easiest type of files to read in R are delimited files (for example comma separated values, csv; or tab separated values, tsv). The cameras file we downloaded is an example of a comma separated file.</p>
<p>We can read <code>cameras.csv</code>
like we have already learned how to do using the
<code>readr::read_csv()</code> function:</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="week-6.html#cb123-1"></a>cameras &lt;-<span class="st"> </span>readr<span class="op">::</span><span class="kw">read_csv</span>(<span class="kw">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;cameras.csv&quot;</span>))</span></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   address = col_character(),
##   direction = col_character(),
##   street = col_character(),
##   crossStreet = col_character(),
##   intersection = col_character(),
##   `Location 1` = col_character(),
##   `2010 Census Neighborhoods` = col_double(),
##   `2010 Census Wards Precincts` = col_double(),
##   `Zip Codes` = col_double()
## )</code></pre>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="week-6.html#cb125-1"></a>cameras</span></code></pre></div>
<pre><code>## # A tibble: 80 x 9
##    address direction street crossStreet intersection `Location 1`
##    &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt;  &lt;chr&gt;       &lt;chr&gt;        &lt;chr&gt;       
##  1 GARRIS… E/B       &quot;Garr… Wabash Ave  &quot;Garrison \… (39.341209,…
##  2 HILLEN… W/B       &quot;Hill… Forrest St  &quot;Hillen \n … (39.29686, …
##  3 EDMOND… E/B       &quot;Edmo… Woodbridge… &quot;Edmonson\n… (39.293453,…
##  4 YORK R… S/B       &quot;York… Gitting Ave &quot;York Rd \n… (39.370493,…
##  5 RUSSEL… S/B       &quot;Russ… Hamburg St  &quot;Russell\n … (39.279819,…
##  6 S MART… S/B       &quot;MLK … Pratt St    &quot;MLK Jr. Bl… (39.286027,…
##  7 ORLEAN… E/B       &quot;Orle… Linwood Ave &quot;Orleans   … (39.295866,…
##  8 E NORT… W/B       &quot;Nort… Springlake… &quot;Northern P… (39.364311,…
##  9 W COLD… E/B       &quot;Cold… Roland Ave  &quot;Cold Sprin… (39.343906,…
## 10 E NORT… W/B       &quot;Nort… York Road   &quot;Northern P… (39.365146,…
## # … with 70 more rows, and 3 more variables: `2010 Census Neighborhoods` &lt;dbl&gt;,
## #   `2010 Census Wards Precincts` &lt;dbl&gt;, `Zip Codes` &lt;dbl&gt;</code></pre>
<p>A couple of important things to check for with these type of “flat” files are:</p>
<ol style="list-style-type: decimal">
<li>What are the indicators of NA - is it NA? NULL? a space? 99999 (gasp!)?</li>
<li>Are there any ill-formatted fields, where a whole row accidentally gets read into one cell?</li>
<li>For text fields, are there any strings that should be factors (or vice-versa)?</li>
</ol>
</div>
<div id="reading-in-excel-files" class="section level3">
<h3><span class="header-section-number">7.6.2</span> Reading in Excel files</h3>
<p>In an ideal world everyone would read the outstanding paper on <a href="https://www.tandfonline.com/doi/full/10.1080/00031305.2017.1375989">Data Organization in Spreadsheets</a> by Broman and Woo - or at the least their abstract where they lay out the most important formatting rules!</p>
<blockquote>
<p>The basic principles are: be consistent, write dates like YYYY-MM-DD, do not leave any cells empty, put just one thing in a cell, organize the data as a single rectangle (with subjects as rows and variables as columns, and with a single header row), create a data dictionary, do not include calculations in the raw data files, do not use font color or highlighting as data, choose good names for things, make backups, use data validation to avoid data entry errors, and save the data in plain text files.</p>
</blockquote>
<p>Unfortunately this is rarely the case and spreadsheets are deceptively difficult to import into R when they have formulae, colored fields, hidden sheets and other things. We can download the cameras data in Excel format and read it with the <code>readxl</code> package:</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="week-6.html#cb127-1"></a><span class="kw">library</span>(readxl)</span>
<span id="cb127-2"><a href="week-6.html#cb127-2"></a>sheets =<span class="st"> </span>readxl<span class="op">::</span><span class="kw">excel_sheets</span>(here<span class="op">::</span><span class="kw">here</span>(<span class="st">&quot;data&quot;</span>,<span class="st">&quot;2020-10-05-cameras.xlsx&quot;</span>))</span>
<span id="cb127-3"><a href="week-6.html#cb127-3"></a>sheets</span></code></pre></div>
<pre><code>## [1] &quot;2020-10-05-cameras&quot;</code></pre>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="week-6.html#cb129-1"></a>cameras &lt;-<span class="st"> </span>readxl<span class="op">::</span><span class="kw">read_excel</span>(here<span class="op">::</span><span class="kw">here</span>(<span class="st">&quot;data&quot;</span>,<span class="st">&quot;2020-10-05-cameras.xlsx&quot;</span>),<span class="dt">sheet=</span>sheets[<span class="dv">1</span>])</span>
<span id="cb129-2"><a href="week-6.html#cb129-2"></a>cameras</span></code></pre></div>
<pre><code>## # A tibble: 80 x 9
##    address direction street crossStreet intersection `Location 1`
##    &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt;  &lt;chr&gt;       &lt;chr&gt;        &lt;chr&gt;       
##  1 GARRIS… E/B       &quot;Garr… Wabash Ave  &quot;Garrison \… (39.341209,…
##  2 HILLEN… W/B       &quot;Hill… Forrest St  &quot;Hillen \n … (39.29686, …
##  3 EDMOND… E/B       &quot;Edmo… Woodbridge… &quot;Edmonson\n… (39.293453,…
##  4 YORK R… S/B       &quot;York… Gitting Ave &quot;York Rd \n… (39.370493,…
##  5 RUSSEL… S/B       &quot;Russ… Hamburg St  &quot;Russell\n … (39.279819,…
##  6 S MART… S/B       &quot;MLK … Pratt St    &quot;MLK Jr. Bl… (39.286027,…
##  7 ORLEAN… E/B       &quot;Orle… Linwood Ave &quot;Orleans   … (39.295866,…
##  8 E NORT… W/B       &quot;Nort… Springlake… &quot;Northern P… (39.364311,…
##  9 W COLD… E/B       &quot;Cold… Roland Ave  &quot;Cold Sprin… (39.343906,…
## 10 E NORT… W/B       &quot;Nort… York Road   &quot;Northern P… (39.365146,…
## # … with 70 more rows, and 3 more variables: `2010 Census Neighborhoods` &lt;dbl&gt;,
## #   `2010 Census Wards Precincts` &lt;dbl&gt;, `Zip Codes` &lt;dbl&gt;</code></pre>
<p>However, in practice you might need to look out for:</p>
<ol style="list-style-type: decimal">
<li>Values that are colored - you may need to use something like <a href="https://cran.r-project.org/web/packages/tidyxl/vignettes/tidyxl.html">tidyxl</a></li>
<li>Values that appear in only a subset of the spreadsheet - you will need to set sell ranges</li>
<li>Hidden sheets - you will want to use the <a href="https://readxl.tidyverse.org/reference/excel_sheets.html">excel_sheets</a> function to check for sheet names before you read.</li>
<li>Formulae - you may need to use tidyxl to discover what they are</li>
<li>Hidden/calculated values - you may again need to use tidyxl</li>
</ol>
<p>In practice, I have seen the code to tidy a single Excel file run into thousands of lines of R code.</p>
</div>
<div id="reading-in-json-files" class="section level3">
<h3><span class="header-section-number">7.6.3</span> Reading in JSON Files</h3>
<p>JSON (or JavaScript Object Notation) is a file
format that stores information in human-readable,
organized, logical, easy-to-access manner.</p>
<p>For example, here is what a JSON file looks
like:</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb131-1"><a href="week-6.html#cb131-1"></a><span class="kw">var</span> stephanie <span class="op">=</span> <span class="op">{</span></span>
<span id="cb131-2"><a href="week-6.html#cb131-2"></a>	<span class="st">&quot;age&quot;</span> <span class="op">:</span> <span class="st">&quot;33&quot;</span><span class="op">,</span></span>
<span id="cb131-3"><a href="week-6.html#cb131-3"></a>	<span class="st">&quot;hometown&quot;</span> <span class="op">:</span> <span class="st">&quot;Baltimore, MD&quot;</span><span class="op">,</span></span>
<span id="cb131-4"><a href="week-6.html#cb131-4"></a>	<span class="st">&quot;gender&quot;</span> <span class="op">:</span> <span class="st">&quot;female&quot;</span><span class="op">,</span> </span>
<span id="cb131-5"><a href="week-6.html#cb131-5"></a>  <span class="st">&quot;cars&quot;</span> <span class="op">:</span> <span class="op">{</span></span>
<span id="cb131-6"><a href="week-6.html#cb131-6"></a>    <span class="st">&quot;car1&quot;</span> <span class="op">:</span> <span class="st">&quot;Hyundai Elantra&quot;</span><span class="op">,</span></span>
<span id="cb131-7"><a href="week-6.html#cb131-7"></a>    <span class="st">&quot;car2&quot;</span> <span class="op">:</span> <span class="st">&quot;Toyota Rav4&quot;</span><span class="op">,</span></span>
<span id="cb131-8"><a href="week-6.html#cb131-8"></a>    <span class="st">&quot;car3&quot;</span> <span class="op">:</span> <span class="st">&quot;Honda CR-V&quot;</span></span>
<span id="cb131-9"><a href="week-6.html#cb131-9"></a>  <span class="op">}</span></span>
<span id="cb131-10"><a href="week-6.html#cb131-10"></a><span class="op">}</span></span></code></pre></div>
<p>Some features about <code>JSON</code> object:</p>
<ul>
<li>JSON objects are surrounded by curly braces <code>{}</code></li>
<li>JSON objects are written in key/value pairs</li>
<li>Keys must be strings, and values must be a valid JSON data type (string, number, object, array, boolean)</li>
<li>Keys and values are separated by a colon</li>
<li>Each key/value pair is separated by a comma</li>
</ul>
</div>
<div id="using-github-api" class="section level3">
<h3><span class="header-section-number">7.6.4</span> Using GitHub API</h3>
<p>Let’s say we want to use the
<a href="https://developer.github.com/v3/?">GitHub API</a>
to find out how many of my GitHub repositories
have open issues? (we will learn more about using APIs in a minute)</p>
<p>We will use the
<a href="https://cran.r-project.org/web/packages/jsonlite/index.html">jsonlite</a>
R package and the <code>fromJSON()</code> function
to convert from a JSON object to a data frame.</p>
<p>We will read in a JSON file located at
<a href="https://api.github.com/users/jtleek/repos">https://api.github.com/users/jtleek/repos</a></p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="week-6.html#cb132-1"></a>github_url =<span class="st"> &quot;https://api.github.com/users/jtleek/repos&quot;</span></span>
<span id="cb132-2"><a href="week-6.html#cb132-2"></a><span class="kw">library</span>(jsonlite)</span>
<span id="cb132-3"><a href="week-6.html#cb132-3"></a>jsonData &lt;-<span class="st"> </span><span class="kw">fromJSON</span>(github_url)</span></code></pre></div>
<p>The function <code>fromJSON()</code> has now converted
the JSON file into a data frame with the names:</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="week-6.html#cb133-1"></a><span class="kw">names</span>(jsonData)</span></code></pre></div>
<pre><code>##  [1] &quot;id&quot;                &quot;node_id&quot;           &quot;name&quot;             
##  [4] &quot;full_name&quot;         &quot;private&quot;           &quot;owner&quot;            
##  [7] &quot;html_url&quot;          &quot;description&quot;       &quot;fork&quot;             
## [10] &quot;url&quot;               &quot;forks_url&quot;         &quot;keys_url&quot;         
## [13] &quot;collaborators_url&quot; &quot;teams_url&quot;         &quot;hooks_url&quot;        
## [16] &quot;issue_events_url&quot;  &quot;events_url&quot;        &quot;assignees_url&quot;    
## [19] &quot;branches_url&quot;      &quot;tags_url&quot;          &quot;blobs_url&quot;        
## [22] &quot;git_tags_url&quot;      &quot;git_refs_url&quot;      &quot;trees_url&quot;        
## [25] &quot;statuses_url&quot;      &quot;languages_url&quot;     &quot;stargazers_url&quot;   
## [28] &quot;contributors_url&quot;  &quot;subscribers_url&quot;   &quot;subscription_url&quot; 
## [31] &quot;commits_url&quot;       &quot;git_commits_url&quot;   &quot;comments_url&quot;     
## [34] &quot;issue_comment_url&quot; &quot;contents_url&quot;      &quot;compare_url&quot;      
## [37] &quot;merges_url&quot;        &quot;archive_url&quot;       &quot;downloads_url&quot;    
## [40] &quot;issues_url&quot;        &quot;pulls_url&quot;         &quot;milestones_url&quot;   
## [43] &quot;notifications_url&quot; &quot;labels_url&quot;        &quot;releases_url&quot;     
## [46] &quot;deployments_url&quot;   &quot;created_at&quot;        &quot;updated_at&quot;       
## [49] &quot;pushed_at&quot;         &quot;git_url&quot;           &quot;ssh_url&quot;          
## [52] &quot;clone_url&quot;         &quot;svn_url&quot;           &quot;homepage&quot;         
## [55] &quot;size&quot;              &quot;stargazers_count&quot;  &quot;watchers_count&quot;   
## [58] &quot;language&quot;          &quot;has_issues&quot;        &quot;has_projects&quot;     
## [61] &quot;has_downloads&quot;     &quot;has_wiki&quot;          &quot;has_pages&quot;        
## [64] &quot;forks_count&quot;       &quot;mirror_url&quot;        &quot;archived&quot;         
## [67] &quot;disabled&quot;          &quot;open_issues_count&quot; &quot;license&quot;          
## [70] &quot;forks&quot;             &quot;open_issues&quot;       &quot;watchers&quot;         
## [73] &quot;default_branch&quot;</code></pre>
<p>How many are private repos? How many have forks?</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="week-6.html#cb135-1"></a><span class="kw">table</span>(jsonData<span class="op">$</span>private)</span></code></pre></div>
<pre><code>## 
## FALSE 
##    30</code></pre>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="week-6.html#cb137-1"></a><span class="kw">table</span>(jsonData<span class="op">$</span>forks)</span></code></pre></div>
<pre><code>## 
##      0      1      2      3      5      6      7      8      9     11     23 
##      7      4      2      3      2      1      1      1      1      1      1 
##     25     41     61    126    713 228195 
##      1      1      1      1      1      1</code></pre>
<p>What’s the most popular language?</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="week-6.html#cb139-1"></a><span class="kw">table</span>(jsonData<span class="op">$</span>language)</span></code></pre></div>
<pre><code>## 
##        C++        CSS       HTML JavaScript          R        TeX 
##          1          1          9          2          6          1</code></pre>
<p>To find out how many repos that I have
with open issues, we can just create
a table:</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="week-6.html#cb141-1"></a><span class="co"># how many repos have open issues? </span></span>
<span id="cb141-2"><a href="week-6.html#cb141-2"></a><span class="kw">table</span>(jsonData<span class="op">$</span>open_issues_count)</span></code></pre></div>
<pre><code>## 
##   0   1   2   5   6 731 
##  22   4   1   1   1   1</code></pre>
<p>Whew! Not as many as I thought.</p>
<p>How many do you have?</p>
<p>One important thing to note about data read in JSON format is that it is often “nested”. The way that R handles this is by forcing an entire data frame into a column!</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="week-6.html#cb143-1"></a><span class="kw">class</span>(jsonData<span class="op">$</span>owner)</span></code></pre></div>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="week-6.html#cb145-1"></a>jsonData<span class="op">$</span>owner</span></code></pre></div>
<pre><code>##     login      id              node_id
## 1  jtleek 1571674 MDQ6VXNlcjE1NzE2NzQ=
## 2  jtleek 1571674 MDQ6VXNlcjE1NzE2NzQ=
## 3  jtleek 1571674 MDQ6VXNlcjE1NzE2NzQ=
## 4  jtleek 1571674 MDQ6VXNlcjE1NzE2NzQ=
## 5  jtleek 1571674 MDQ6VXNlcjE1NzE2NzQ=
## 6  jtleek 1571674 MDQ6VXNlcjE1NzE2NzQ=
## 7  jtleek 1571674 MDQ6VXNlcjE1NzE2NzQ=
## 8  jtleek 1571674 MDQ6VXNlcjE1NzE2NzQ=
## 9  jtleek 1571674 MDQ6VXNlcjE1NzE2NzQ=
## 10 jtleek 1571674 MDQ6VXNlcjE1NzE2NzQ=
## 11 jtleek 1571674 MDQ6VXNlcjE1NzE2NzQ=
## 12 jtleek 1571674 MDQ6VXNlcjE1NzE2NzQ=
## 13 jtleek 1571674 MDQ6VXNlcjE1NzE2NzQ=
## 14 jtleek 1571674 MDQ6VXNlcjE1NzE2NzQ=
## 15 jtleek 1571674 MDQ6VXNlcjE1NzE2NzQ=
## 16 jtleek 1571674 MDQ6VXNlcjE1NzE2NzQ=
## 17 jtleek 1571674 MDQ6VXNlcjE1NzE2NzQ=
## 18 jtleek 1571674 MDQ6VXNlcjE1NzE2NzQ=
## 19 jtleek 1571674 MDQ6VXNlcjE1NzE2NzQ=
## 20 jtleek 1571674 MDQ6VXNlcjE1NzE2NzQ=
## 21 jtleek 1571674 MDQ6VXNlcjE1NzE2NzQ=
## 22 jtleek 1571674 MDQ6VXNlcjE1NzE2NzQ=
## 23 jtleek 1571674 MDQ6VXNlcjE1NzE2NzQ=
## 24 jtleek 1571674 MDQ6VXNlcjE1NzE2NzQ=
## 25 jtleek 1571674 MDQ6VXNlcjE1NzE2NzQ=
## 26 jtleek 1571674 MDQ6VXNlcjE1NzE2NzQ=
## 27 jtleek 1571674 MDQ6VXNlcjE1NzE2NzQ=
## 28 jtleek 1571674 MDQ6VXNlcjE1NzE2NzQ=
## 29 jtleek 1571674 MDQ6VXNlcjE1NzE2NzQ=
## 30 jtleek 1571674 MDQ6VXNlcjE1NzE2NzQ=
##                                              avatar_url gravatar_id
## 1  https://avatars2.githubusercontent.com/u/1571674?v=4            
## 2  https://avatars2.githubusercontent.com/u/1571674?v=4            
## 3  https://avatars2.githubusercontent.com/u/1571674?v=4            
## 4  https://avatars2.githubusercontent.com/u/1571674?v=4            
## 5  https://avatars2.githubusercontent.com/u/1571674?v=4            
## 6  https://avatars2.githubusercontent.com/u/1571674?v=4            
## 7  https://avatars2.githubusercontent.com/u/1571674?v=4            
## 8  https://avatars2.githubusercontent.com/u/1571674?v=4            
## 9  https://avatars2.githubusercontent.com/u/1571674?v=4            
## 10 https://avatars2.githubusercontent.com/u/1571674?v=4            
## 11 https://avatars2.githubusercontent.com/u/1571674?v=4            
## 12 https://avatars2.githubusercontent.com/u/1571674?v=4            
## 13 https://avatars2.githubusercontent.com/u/1571674?v=4            
## 14 https://avatars2.githubusercontent.com/u/1571674?v=4            
## 15 https://avatars2.githubusercontent.com/u/1571674?v=4            
## 16 https://avatars2.githubusercontent.com/u/1571674?v=4            
## 17 https://avatars2.githubusercontent.com/u/1571674?v=4            
## 18 https://avatars2.githubusercontent.com/u/1571674?v=4            
## 19 https://avatars2.githubusercontent.com/u/1571674?v=4            
## 20 https://avatars2.githubusercontent.com/u/1571674?v=4            
## 21 https://avatars2.githubusercontent.com/u/1571674?v=4            
## 22 https://avatars2.githubusercontent.com/u/1571674?v=4            
## 23 https://avatars2.githubusercontent.com/u/1571674?v=4            
## 24 https://avatars2.githubusercontent.com/u/1571674?v=4            
## 25 https://avatars2.githubusercontent.com/u/1571674?v=4            
## 26 https://avatars2.githubusercontent.com/u/1571674?v=4            
## 27 https://avatars2.githubusercontent.com/u/1571674?v=4            
## 28 https://avatars2.githubusercontent.com/u/1571674?v=4            
## 29 https://avatars2.githubusercontent.com/u/1571674?v=4            
## 30 https://avatars2.githubusercontent.com/u/1571674?v=4            
##                                    url                  html_url
## 1  https://api.github.com/users/jtleek https://github.com/jtleek
## 2  https://api.github.com/users/jtleek https://github.com/jtleek
## 3  https://api.github.com/users/jtleek https://github.com/jtleek
## 4  https://api.github.com/users/jtleek https://github.com/jtleek
## 5  https://api.github.com/users/jtleek https://github.com/jtleek
## 6  https://api.github.com/users/jtleek https://github.com/jtleek
## 7  https://api.github.com/users/jtleek https://github.com/jtleek
## 8  https://api.github.com/users/jtleek https://github.com/jtleek
## 9  https://api.github.com/users/jtleek https://github.com/jtleek
## 10 https://api.github.com/users/jtleek https://github.com/jtleek
## 11 https://api.github.com/users/jtleek https://github.com/jtleek
## 12 https://api.github.com/users/jtleek https://github.com/jtleek
## 13 https://api.github.com/users/jtleek https://github.com/jtleek
## 14 https://api.github.com/users/jtleek https://github.com/jtleek
## 15 https://api.github.com/users/jtleek https://github.com/jtleek
## 16 https://api.github.com/users/jtleek https://github.com/jtleek
## 17 https://api.github.com/users/jtleek https://github.com/jtleek
## 18 https://api.github.com/users/jtleek https://github.com/jtleek
## 19 https://api.github.com/users/jtleek https://github.com/jtleek
## 20 https://api.github.com/users/jtleek https://github.com/jtleek
## 21 https://api.github.com/users/jtleek https://github.com/jtleek
## 22 https://api.github.com/users/jtleek https://github.com/jtleek
## 23 https://api.github.com/users/jtleek https://github.com/jtleek
## 24 https://api.github.com/users/jtleek https://github.com/jtleek
## 25 https://api.github.com/users/jtleek https://github.com/jtleek
## 26 https://api.github.com/users/jtleek https://github.com/jtleek
## 27 https://api.github.com/users/jtleek https://github.com/jtleek
## 28 https://api.github.com/users/jtleek https://github.com/jtleek
## 29 https://api.github.com/users/jtleek https://github.com/jtleek
## 30 https://api.github.com/users/jtleek https://github.com/jtleek
##                                    followers_url
## 1  https://api.github.com/users/jtleek/followers
## 2  https://api.github.com/users/jtleek/followers
## 3  https://api.github.com/users/jtleek/followers
## 4  https://api.github.com/users/jtleek/followers
## 5  https://api.github.com/users/jtleek/followers
## 6  https://api.github.com/users/jtleek/followers
## 7  https://api.github.com/users/jtleek/followers
## 8  https://api.github.com/users/jtleek/followers
## 9  https://api.github.com/users/jtleek/followers
## 10 https://api.github.com/users/jtleek/followers
## 11 https://api.github.com/users/jtleek/followers
## 12 https://api.github.com/users/jtleek/followers
## 13 https://api.github.com/users/jtleek/followers
## 14 https://api.github.com/users/jtleek/followers
## 15 https://api.github.com/users/jtleek/followers
## 16 https://api.github.com/users/jtleek/followers
## 17 https://api.github.com/users/jtleek/followers
## 18 https://api.github.com/users/jtleek/followers
## 19 https://api.github.com/users/jtleek/followers
## 20 https://api.github.com/users/jtleek/followers
## 21 https://api.github.com/users/jtleek/followers
## 22 https://api.github.com/users/jtleek/followers
## 23 https://api.github.com/users/jtleek/followers
## 24 https://api.github.com/users/jtleek/followers
## 25 https://api.github.com/users/jtleek/followers
## 26 https://api.github.com/users/jtleek/followers
## 27 https://api.github.com/users/jtleek/followers
## 28 https://api.github.com/users/jtleek/followers
## 29 https://api.github.com/users/jtleek/followers
## 30 https://api.github.com/users/jtleek/followers
##                                                 following_url
## 1  https://api.github.com/users/jtleek/following{/other_user}
## 2  https://api.github.com/users/jtleek/following{/other_user}
## 3  https://api.github.com/users/jtleek/following{/other_user}
## 4  https://api.github.com/users/jtleek/following{/other_user}
## 5  https://api.github.com/users/jtleek/following{/other_user}
## 6  https://api.github.com/users/jtleek/following{/other_user}
## 7  https://api.github.com/users/jtleek/following{/other_user}
## 8  https://api.github.com/users/jtleek/following{/other_user}
## 9  https://api.github.com/users/jtleek/following{/other_user}
## 10 https://api.github.com/users/jtleek/following{/other_user}
## 11 https://api.github.com/users/jtleek/following{/other_user}
## 12 https://api.github.com/users/jtleek/following{/other_user}
## 13 https://api.github.com/users/jtleek/following{/other_user}
## 14 https://api.github.com/users/jtleek/following{/other_user}
## 15 https://api.github.com/users/jtleek/following{/other_user}
## 16 https://api.github.com/users/jtleek/following{/other_user}
## 17 https://api.github.com/users/jtleek/following{/other_user}
## 18 https://api.github.com/users/jtleek/following{/other_user}
## 19 https://api.github.com/users/jtleek/following{/other_user}
## 20 https://api.github.com/users/jtleek/following{/other_user}
## 21 https://api.github.com/users/jtleek/following{/other_user}
## 22 https://api.github.com/users/jtleek/following{/other_user}
## 23 https://api.github.com/users/jtleek/following{/other_user}
## 24 https://api.github.com/users/jtleek/following{/other_user}
## 25 https://api.github.com/users/jtleek/following{/other_user}
## 26 https://api.github.com/users/jtleek/following{/other_user}
## 27 https://api.github.com/users/jtleek/following{/other_user}
## 28 https://api.github.com/users/jtleek/following{/other_user}
## 29 https://api.github.com/users/jtleek/following{/other_user}
## 30 https://api.github.com/users/jtleek/following{/other_user}
##                                              gists_url
## 1  https://api.github.com/users/jtleek/gists{/gist_id}
## 2  https://api.github.com/users/jtleek/gists{/gist_id}
## 3  https://api.github.com/users/jtleek/gists{/gist_id}
## 4  https://api.github.com/users/jtleek/gists{/gist_id}
## 5  https://api.github.com/users/jtleek/gists{/gist_id}
## 6  https://api.github.com/users/jtleek/gists{/gist_id}
## 7  https://api.github.com/users/jtleek/gists{/gist_id}
## 8  https://api.github.com/users/jtleek/gists{/gist_id}
## 9  https://api.github.com/users/jtleek/gists{/gist_id}
## 10 https://api.github.com/users/jtleek/gists{/gist_id}
## 11 https://api.github.com/users/jtleek/gists{/gist_id}
## 12 https://api.github.com/users/jtleek/gists{/gist_id}
## 13 https://api.github.com/users/jtleek/gists{/gist_id}
## 14 https://api.github.com/users/jtleek/gists{/gist_id}
## 15 https://api.github.com/users/jtleek/gists{/gist_id}
## 16 https://api.github.com/users/jtleek/gists{/gist_id}
## 17 https://api.github.com/users/jtleek/gists{/gist_id}
## 18 https://api.github.com/users/jtleek/gists{/gist_id}
## 19 https://api.github.com/users/jtleek/gists{/gist_id}
## 20 https://api.github.com/users/jtleek/gists{/gist_id}
## 21 https://api.github.com/users/jtleek/gists{/gist_id}
## 22 https://api.github.com/users/jtleek/gists{/gist_id}
## 23 https://api.github.com/users/jtleek/gists{/gist_id}
## 24 https://api.github.com/users/jtleek/gists{/gist_id}
## 25 https://api.github.com/users/jtleek/gists{/gist_id}
## 26 https://api.github.com/users/jtleek/gists{/gist_id}
## 27 https://api.github.com/users/jtleek/gists{/gist_id}
## 28 https://api.github.com/users/jtleek/gists{/gist_id}
## 29 https://api.github.com/users/jtleek/gists{/gist_id}
## 30 https://api.github.com/users/jtleek/gists{/gist_id}
##                                                   starred_url
## 1  https://api.github.com/users/jtleek/starred{/owner}{/repo}
## 2  https://api.github.com/users/jtleek/starred{/owner}{/repo}
## 3  https://api.github.com/users/jtleek/starred{/owner}{/repo}
## 4  https://api.github.com/users/jtleek/starred{/owner}{/repo}
## 5  https://api.github.com/users/jtleek/starred{/owner}{/repo}
## 6  https://api.github.com/users/jtleek/starred{/owner}{/repo}
## 7  https://api.github.com/users/jtleek/starred{/owner}{/repo}
## 8  https://api.github.com/users/jtleek/starred{/owner}{/repo}
## 9  https://api.github.com/users/jtleek/starred{/owner}{/repo}
## 10 https://api.github.com/users/jtleek/starred{/owner}{/repo}
## 11 https://api.github.com/users/jtleek/starred{/owner}{/repo}
## 12 https://api.github.com/users/jtleek/starred{/owner}{/repo}
## 13 https://api.github.com/users/jtleek/starred{/owner}{/repo}
## 14 https://api.github.com/users/jtleek/starred{/owner}{/repo}
## 15 https://api.github.com/users/jtleek/starred{/owner}{/repo}
## 16 https://api.github.com/users/jtleek/starred{/owner}{/repo}
## 17 https://api.github.com/users/jtleek/starred{/owner}{/repo}
## 18 https://api.github.com/users/jtleek/starred{/owner}{/repo}
## 19 https://api.github.com/users/jtleek/starred{/owner}{/repo}
## 20 https://api.github.com/users/jtleek/starred{/owner}{/repo}
## 21 https://api.github.com/users/jtleek/starred{/owner}{/repo}
## 22 https://api.github.com/users/jtleek/starred{/owner}{/repo}
## 23 https://api.github.com/users/jtleek/starred{/owner}{/repo}
## 24 https://api.github.com/users/jtleek/starred{/owner}{/repo}
## 25 https://api.github.com/users/jtleek/starred{/owner}{/repo}
## 26 https://api.github.com/users/jtleek/starred{/owner}{/repo}
## 27 https://api.github.com/users/jtleek/starred{/owner}{/repo}
## 28 https://api.github.com/users/jtleek/starred{/owner}{/repo}
## 29 https://api.github.com/users/jtleek/starred{/owner}{/repo}
## 30 https://api.github.com/users/jtleek/starred{/owner}{/repo}
##                                    subscriptions_url
## 1  https://api.github.com/users/jtleek/subscriptions
## 2  https://api.github.com/users/jtleek/subscriptions
## 3  https://api.github.com/users/jtleek/subscriptions
## 4  https://api.github.com/users/jtleek/subscriptions
## 5  https://api.github.com/users/jtleek/subscriptions
## 6  https://api.github.com/users/jtleek/subscriptions
## 7  https://api.github.com/users/jtleek/subscriptions
## 8  https://api.github.com/users/jtleek/subscriptions
## 9  https://api.github.com/users/jtleek/subscriptions
## 10 https://api.github.com/users/jtleek/subscriptions
## 11 https://api.github.com/users/jtleek/subscriptions
## 12 https://api.github.com/users/jtleek/subscriptions
## 13 https://api.github.com/users/jtleek/subscriptions
## 14 https://api.github.com/users/jtleek/subscriptions
## 15 https://api.github.com/users/jtleek/subscriptions
## 16 https://api.github.com/users/jtleek/subscriptions
## 17 https://api.github.com/users/jtleek/subscriptions
## 18 https://api.github.com/users/jtleek/subscriptions
## 19 https://api.github.com/users/jtleek/subscriptions
## 20 https://api.github.com/users/jtleek/subscriptions
## 21 https://api.github.com/users/jtleek/subscriptions
## 22 https://api.github.com/users/jtleek/subscriptions
## 23 https://api.github.com/users/jtleek/subscriptions
## 24 https://api.github.com/users/jtleek/subscriptions
## 25 https://api.github.com/users/jtleek/subscriptions
## 26 https://api.github.com/users/jtleek/subscriptions
## 27 https://api.github.com/users/jtleek/subscriptions
## 28 https://api.github.com/users/jtleek/subscriptions
## 29 https://api.github.com/users/jtleek/subscriptions
## 30 https://api.github.com/users/jtleek/subscriptions
##                           organizations_url
## 1  https://api.github.com/users/jtleek/orgs
## 2  https://api.github.com/users/jtleek/orgs
## 3  https://api.github.com/users/jtleek/orgs
## 4  https://api.github.com/users/jtleek/orgs
## 5  https://api.github.com/users/jtleek/orgs
## 6  https://api.github.com/users/jtleek/orgs
## 7  https://api.github.com/users/jtleek/orgs
## 8  https://api.github.com/users/jtleek/orgs
## 9  https://api.github.com/users/jtleek/orgs
## 10 https://api.github.com/users/jtleek/orgs
## 11 https://api.github.com/users/jtleek/orgs
## 12 https://api.github.com/users/jtleek/orgs
## 13 https://api.github.com/users/jtleek/orgs
## 14 https://api.github.com/users/jtleek/orgs
## 15 https://api.github.com/users/jtleek/orgs
## 16 https://api.github.com/users/jtleek/orgs
## 17 https://api.github.com/users/jtleek/orgs
## 18 https://api.github.com/users/jtleek/orgs
## 19 https://api.github.com/users/jtleek/orgs
## 20 https://api.github.com/users/jtleek/orgs
## 21 https://api.github.com/users/jtleek/orgs
## 22 https://api.github.com/users/jtleek/orgs
## 23 https://api.github.com/users/jtleek/orgs
## 24 https://api.github.com/users/jtleek/orgs
## 25 https://api.github.com/users/jtleek/orgs
## 26 https://api.github.com/users/jtleek/orgs
## 27 https://api.github.com/users/jtleek/orgs
## 28 https://api.github.com/users/jtleek/orgs
## 29 https://api.github.com/users/jtleek/orgs
## 30 https://api.github.com/users/jtleek/orgs
##                                    repos_url
## 1  https://api.github.com/users/jtleek/repos
## 2  https://api.github.com/users/jtleek/repos
## 3  https://api.github.com/users/jtleek/repos
## 4  https://api.github.com/users/jtleek/repos
## 5  https://api.github.com/users/jtleek/repos
## 6  https://api.github.com/users/jtleek/repos
## 7  https://api.github.com/users/jtleek/repos
## 8  https://api.github.com/users/jtleek/repos
## 9  https://api.github.com/users/jtleek/repos
## 10 https://api.github.com/users/jtleek/repos
## 11 https://api.github.com/users/jtleek/repos
## 12 https://api.github.com/users/jtleek/repos
## 13 https://api.github.com/users/jtleek/repos
## 14 https://api.github.com/users/jtleek/repos
## 15 https://api.github.com/users/jtleek/repos
## 16 https://api.github.com/users/jtleek/repos
## 17 https://api.github.com/users/jtleek/repos
## 18 https://api.github.com/users/jtleek/repos
## 19 https://api.github.com/users/jtleek/repos
## 20 https://api.github.com/users/jtleek/repos
## 21 https://api.github.com/users/jtleek/repos
## 22 https://api.github.com/users/jtleek/repos
## 23 https://api.github.com/users/jtleek/repos
## 24 https://api.github.com/users/jtleek/repos
## 25 https://api.github.com/users/jtleek/repos
## 26 https://api.github.com/users/jtleek/repos
## 27 https://api.github.com/users/jtleek/repos
## 28 https://api.github.com/users/jtleek/repos
## 29 https://api.github.com/users/jtleek/repos
## 30 https://api.github.com/users/jtleek/repos
##                                              events_url
## 1  https://api.github.com/users/jtleek/events{/privacy}
## 2  https://api.github.com/users/jtleek/events{/privacy}
## 3  https://api.github.com/users/jtleek/events{/privacy}
## 4  https://api.github.com/users/jtleek/events{/privacy}
## 5  https://api.github.com/users/jtleek/events{/privacy}
## 6  https://api.github.com/users/jtleek/events{/privacy}
## 7  https://api.github.com/users/jtleek/events{/privacy}
## 8  https://api.github.com/users/jtleek/events{/privacy}
## 9  https://api.github.com/users/jtleek/events{/privacy}
## 10 https://api.github.com/users/jtleek/events{/privacy}
## 11 https://api.github.com/users/jtleek/events{/privacy}
## 12 https://api.github.com/users/jtleek/events{/privacy}
## 13 https://api.github.com/users/jtleek/events{/privacy}
## 14 https://api.github.com/users/jtleek/events{/privacy}
## 15 https://api.github.com/users/jtleek/events{/privacy}
## 16 https://api.github.com/users/jtleek/events{/privacy}
## 17 https://api.github.com/users/jtleek/events{/privacy}
## 18 https://api.github.com/users/jtleek/events{/privacy}
## 19 https://api.github.com/users/jtleek/events{/privacy}
## 20 https://api.github.com/users/jtleek/events{/privacy}
## 21 https://api.github.com/users/jtleek/events{/privacy}
## 22 https://api.github.com/users/jtleek/events{/privacy}
## 23 https://api.github.com/users/jtleek/events{/privacy}
## 24 https://api.github.com/users/jtleek/events{/privacy}
## 25 https://api.github.com/users/jtleek/events{/privacy}
## 26 https://api.github.com/users/jtleek/events{/privacy}
## 27 https://api.github.com/users/jtleek/events{/privacy}
## 28 https://api.github.com/users/jtleek/events{/privacy}
## 29 https://api.github.com/users/jtleek/events{/privacy}
## 30 https://api.github.com/users/jtleek/events{/privacy}
##                                    received_events_url type site_admin
## 1  https://api.github.com/users/jtleek/received_events User      FALSE
## 2  https://api.github.com/users/jtleek/received_events User      FALSE
## 3  https://api.github.com/users/jtleek/received_events User      FALSE
## 4  https://api.github.com/users/jtleek/received_events User      FALSE
## 5  https://api.github.com/users/jtleek/received_events User      FALSE
## 6  https://api.github.com/users/jtleek/received_events User      FALSE
## 7  https://api.github.com/users/jtleek/received_events User      FALSE
## 8  https://api.github.com/users/jtleek/received_events User      FALSE
## 9  https://api.github.com/users/jtleek/received_events User      FALSE
## 10 https://api.github.com/users/jtleek/received_events User      FALSE
## 11 https://api.github.com/users/jtleek/received_events User      FALSE
## 12 https://api.github.com/users/jtleek/received_events User      FALSE
## 13 https://api.github.com/users/jtleek/received_events User      FALSE
## 14 https://api.github.com/users/jtleek/received_events User      FALSE
## 15 https://api.github.com/users/jtleek/received_events User      FALSE
## 16 https://api.github.com/users/jtleek/received_events User      FALSE
## 17 https://api.github.com/users/jtleek/received_events User      FALSE
## 18 https://api.github.com/users/jtleek/received_events User      FALSE
## 19 https://api.github.com/users/jtleek/received_events User      FALSE
## 20 https://api.github.com/users/jtleek/received_events User      FALSE
## 21 https://api.github.com/users/jtleek/received_events User      FALSE
## 22 https://api.github.com/users/jtleek/received_events User      FALSE
## 23 https://api.github.com/users/jtleek/received_events User      FALSE
## 24 https://api.github.com/users/jtleek/received_events User      FALSE
## 25 https://api.github.com/users/jtleek/received_events User      FALSE
## 26 https://api.github.com/users/jtleek/received_events User      FALSE
## 27 https://api.github.com/users/jtleek/received_events User      FALSE
## 28 https://api.github.com/users/jtleek/received_events User      FALSE
## 29 https://api.github.com/users/jtleek/received_events User      FALSE
## 30 https://api.github.com/users/jtleek/received_events User      FALSE</code></pre>
<p>Finally, I will leave you with a few
other examples of using GitHub API:</p>
<ul>
<li><a href="https://blog.exploratory.io/analyzing-issue-data-with-github-rest-api-63945017dedc">How long does it take to close a GitHub Issue in the <code>dplyr</code> package?</a></li>
<li><a href="https://stackoverflow.com/questions/9179828/github-api-retrieve-all-commits-for-all-branches-for-a-repo">How to retrieve all commits for a branch</a></li>
<li><a href="https://masalmon.eu/2017/12/21/wherehaveyoubeen/">Getting my GitHub Activity</a></li>
</ul>
<p><img src="https://masalmon.eu/figure/source/2017-12-21-wherehaveyoubeen/unnamed-chunk-5-1.png" /></p>
</div>
</div>
<div id="google-sheets" class="section level2">
<h2><span class="header-section-number">7.7</span> Google Sheets</h2>
<p>Google Sheets is increasingly used to create and store data. It is one of the <a href="https://simplystatistics.org/2016/08/26/googlesheets/">most useful distributed data collection services</a>. Not surprisingly, there are a number of tools that have been developed for reading data from Google Sheets. If the data are not protected, then you can make them public on the web and read them without authentication:</p>
<p><img src="images/week6/publish-to-web.png" /></p>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="week-6.html#cb147-1"></a><span class="kw">library</span>(googlesheets4)</span>
<span id="cb147-2"><a href="week-6.html#cb147-2"></a><span class="kw">gs4_deauth</span>()</span>
<span id="cb147-3"><a href="week-6.html#cb147-3"></a>cameras =<span class="st"> </span>googlesheets4<span class="op">::</span><span class="kw">read_sheet</span>(<span class="st">&quot;https://docs.google.com/spreadsheets/d/16gHHSHCIg7r4NRu_8dbCaZzjkEChh799nyujXbiDVPg/edit?usp=sharing&quot;</span>)</span></code></pre></div>
<pre><code>## Reading from &quot;2020-10-05-cameras&quot;</code></pre>
<pre><code>## Range &quot;2020-10-05-cameras&quot;</code></pre>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="week-6.html#cb150-1"></a>cameras</span></code></pre></div>
<pre><code>## # A tibble: 80 x 9
##    address direction street crossStreet intersection `Location 1`
##    &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt;  &lt;chr&gt;       &lt;chr&gt;        &lt;chr&gt;       
##  1 GARRIS… E/B       Garri… Wabash Ave  &quot;Garrison \… (39.341209,…
##  2 HILLEN… W/B       Hillen Forrest St  &quot;Hillen \n … (39.29686, …
##  3 EDMOND… E/B       Edmon… Woodbridge… &quot;Edmonson\n… (39.293453,…
##  4 YORK R… S/B       York … Gitting Ave &quot;York Rd \n… (39.370493,…
##  5 RUSSEL… S/B       Russe… Hamburg St  &quot;Russell\n … (39.279819,…
##  6 S MART… S/B       MLK J… Pratt St    &quot;MLK Jr. Bl… (39.286027,…
##  7 ORLEAN… E/B       Orlea… Linwood Ave &quot;Orleans   … (39.295866,…
##  8 E NORT… W/B       North… Springlake… &quot;Northern P… (39.364311,…
##  9 W COLD… E/B       Cold … Roland Ave  &quot;Cold Sprin… (39.343906,…
## 10 E NORT… W/B       North… York Road   &quot;Northern P… (39.365146,…
## # … with 70 more rows, and 3 more variables: `2010 Census Neighborhoods` &lt;dbl&gt;,
## #   `2010 Census Wards Precincts` &lt;dbl&gt;, `Zip Codes` &lt;dbl&gt;</code></pre>
<p>You can also read private Google Sheets if you have permission. You will first need to authenticate with your Google account:</p>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="week-6.html#cb152-1"></a><span class="kw">library</span>(googlesheets4)</span>
<span id="cb152-2"><a href="week-6.html#cb152-2"></a><span class="kw">gs4_auth</span>()</span>
<span id="cb152-3"><a href="week-6.html#cb152-3"></a>cameras =<span class="st"> </span>googlesheets4<span class="op">::</span><span class="kw">read_sheet</span>(<span class="st">&quot;https://docs.google.com/spreadsheets/d/16gHHSHCIg7r4NRu_8dbCaZzjkEChh799nyujXbiDVPg/edit?usp=sharing&quot;</span>)</span>
<span id="cb152-4"><a href="week-6.html#cb152-4"></a>cameras</span></code></pre></div>
<p>There is a lot more you can do with the <a href="https://googlesheets4.tidyverse.org/">googlesheets4</a> package including navigating the sheets you have access to, identifying them by id, and much more. All of the same caveats apply as with an Excel spreadsheet. These sheets can be just as complicated and hard to manage.</p>
</div>
<div id="databases" class="section level2">
<h2><span class="header-section-number">7.8</span> Databases</h2>
<p>If you plan to do data science in industry, one of the most useful things you can learn about is how to acces, manipulate, and use data that is stored in databases. We don’t have time to cover all of the varieties of databases in this course. So we will focus on <a href="https://en.wikipedia.org/wiki/Relational_database">relational databases</a>. These databases include tables that have pre-defined relationships.</p>
<p>There are several ways to
<a href="https://db.rstudio.com/getting-started/database-queries/">query databases in R</a>. Here we will use sqllite as an example of the type of database you can access in R.</p>
<p>First, we will download a <code>.sqlite</code> database. This is a
portable version of a <code>SQL</code> database. For our
purposes, we will use the
<a href="https://github.com/lerocha/chinook-database/blob/master/ChinookDatabase/DataSources/Chinook_Sqlite.sqlite">chinook sqlite database here</a>. The database represents a
“digital media store, including tables for artists,
albums, media tracks, invoices and customers”.</p>
<p>From the <a href="https://github.com/lerocha/chinook-database">Readme.md</a> file:</p>
<blockquote>
<p>Sample Data</p>
<p>Media related data was created using real data from an iTunes Library. It is possible for you to use your own iTunes Library to generate the SQL scripts, see instructions below. Customer and employee information was manually created using fictitious names, addresses that can be located on Google maps, and other well formatted data (phone, fax, email, etc.). Sales information is auto generated using random data for a four year period.</p>
</blockquote>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="week-6.html#cb153-1"></a><span class="cf">if</span>(<span class="op">!</span><span class="kw">file.exists</span>(<span class="kw">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;Chinook.sqlite&quot;</span>))){</span>
<span id="cb153-2"><a href="week-6.html#cb153-2"></a>  file_url &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="st">&quot;https://github.com/lerocha/chinook-database/raw/master/ChinookDatabase/DataSources/Chinook_Sqlite.sqlite&quot;</span>)</span>
<span id="cb153-3"><a href="week-6.html#cb153-3"></a>  <span class="kw">download.file</span>(file_url,</span>
<span id="cb153-4"><a href="week-6.html#cb153-4"></a>                <span class="dt">destfile=</span><span class="kw">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;Chinook.sqlite&quot;</span>))</span>
<span id="cb153-5"><a href="week-6.html#cb153-5"></a>}</span>
<span id="cb153-6"><a href="week-6.html#cb153-6"></a><span class="kw">list.files</span>(<span class="kw">here</span>(<span class="st">&quot;data&quot;</span>))</span></code></pre></div>
<pre><code>##  [1] &quot;2020-10-05-cameras.csv&quot;  &quot;2020-10-05-cameras.xlsx&quot;
##  [3] &quot;2020-10-11-cameras.csv&quot;  &quot;2020-10-12-cameras.csv&quot; 
##  [5] &quot;2020-10-21-cameras.csv&quot;  &quot;2020-10-26-cameras.csv&quot; 
##  [7] &quot;2020-11-02-cameras.csv&quot;  &quot;cameras.csv&quot;            
##  [9] &quot;Chinook.sqlite&quot;          &quot;repos.json&quot;</code></pre>
<p>The main workhorse packages that we will use are
the <code>DBI</code> and <code>dplyr</code> packages. Let’s look at the
<code>DBI::dbConnect()</code> help file</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="week-6.html#cb155-1"></a>?DBI<span class="op">::</span>dbConnect</span></code></pre></div>
<p>So we need a driver and one example is <code>RSQLite::SQLite()</code>.
Let’s look at the help file</p>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="week-6.html#cb156-1"></a>?RSQLite<span class="op">::</span>SQLite</span></code></pre></div>
<p>Ok so with <code>RSQLite::SQLite()</code> and <code>DBI::dbConnect()</code>
we can connect to a <code>SQLite</code> database. Let’s try that
with our <code>Chinook.sqlite</code> file that we downloaded. Chinook.sqlite</p>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="week-6.html#cb157-1"></a><span class="kw">library</span>(DBI)</span>
<span id="cb157-2"><a href="week-6.html#cb157-2"></a>conn &lt;-<span class="st"> </span>DBI<span class="op">::</span><span class="kw">dbConnect</span>(RSQLite<span class="op">::</span><span class="kw">SQLite</span>(), </span>
<span id="cb157-3"><a href="week-6.html#cb157-3"></a>                       <span class="kw">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;Chinook.sqlite&quot;</span>))</span>
<span id="cb157-4"><a href="week-6.html#cb157-4"></a>conn</span></code></pre></div>
<pre><code>## &lt;SQLiteConnection&gt;
##   Path: /cloud/project/data/Chinook.sqlite
##   Extensions: TRUE</code></pre>
<p>So we have opened up a connection with the SQLite database. You can use a similar process with most common database backends, both locally on your computer and by connecting to databases on the cloud like <a href="https://db.rstudio.com/databases/big-query/">BigQuery</a> or <a href="https://db.rstudio.com/databases/redshift/">RedShift</a>.</p>
<p>Next, we can see what tables are available in the database
using the <code>dbListTables()</code> function:</p>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="week-6.html#cb159-1"></a><span class="kw">dbListTables</span>(conn)</span></code></pre></div>
<pre><code>##  [1] &quot;Album&quot;         &quot;Artist&quot;        &quot;Customer&quot;      &quot;Employee&quot;     
##  [5] &quot;Genre&quot;         &quot;Invoice&quot;       &quot;InvoiceLine&quot;   &quot;MediaType&quot;    
##  [9] &quot;Playlist&quot;      &quot;PlaylistTrack&quot; &quot;Track&quot;</code></pre>
<p>From RStudio’s website, there are several ways to interact with
SQL Databases. One of the simplest ways that we will use here is
to leverage the <code>dplyr</code> framework.</p>
<blockquote>
<p>"The <code>dplyr</code> package now has a generalized SQL backend for talking to databases, and the new <code>dbplyr</code> package translates R code into database-specific variants. As of this writing, SQL variants are supported for the following databases: Oracle, Microsoft SQL Server, PostgreSQL, Amazon Redshift, Apache Hive, and Apache Impala. More will follow over time.
So if we want to query a SQL databse with <code>dplyr, the  benefit of using</code>dbplyr<code>is:  "You can write your code in</code>dplyr<code>syntax, and</code>dplyr<code>will translate your code into SQL. There are several benefits to writing queries in</code>dplyr<code>syntax: you can keep the same consistent language both for R objects and database tables, no knowledge of SQL or the specific SQL variant is required, and you can take advantage of the fact that</code>dplyr<code>uses lazy evaluation. Let's take a closer look at the</code>conn` database
that we just connected to:</p>
</blockquote>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="week-6.html#cb161-1"></a><span class="kw">library</span>(dplyr)</span></code></pre></div>
<pre><code>## 
## Attaching package: &#39;dplyr&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:stats&#39;:
## 
##     filter, lag</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     intersect, setdiff, setequal, union</code></pre>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="week-6.html#cb165-1"></a><span class="kw">library</span>(dbplyr)</span></code></pre></div>
<pre><code>## 
## Attaching package: &#39;dbplyr&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:dplyr&#39;:
## 
##     ident, sql</code></pre>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="week-6.html#cb168-1"></a><span class="kw">src_dbi</span>(conn)</span></code></pre></div>
<pre><code>## src:  sqlite 3.33.0 [/cloud/project/data/Chinook.sqlite]
## tbls: Album, Artist, Customer, Employee, Genre, Invoice, InvoiceLine,
##   MediaType, Playlist, PlaylistTrack, Track</code></pre>
<p>You can think of the multiple tables similar to having
multiple worksheets in a spreadsheet.</p>
<p>Let’s try interacting with one.</p>
<div id="querying-with-dplyr-syntax" class="section level3">
<h3><span class="header-section-number">7.8.1</span> Querying with <code>dplyr</code> syntax</h3>
<p>First, let’s look at the first ten rows in the
<code>Album</code> table.</p>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="week-6.html#cb170-1"></a><span class="kw">tbl</span>(conn, <span class="st">&quot;Album&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb170-2"><a href="week-6.html#cb170-2"></a><span class="st">  </span><span class="kw">head</span>(<span class="dt">n=</span><span class="dv">10</span>)</span></code></pre></div>
<pre><code>## # Source:   lazy query [?? x 3]
## # Database: sqlite 3.33.0 [/cloud/project/data/Chinook.sqlite]
##    AlbumId Title                                 ArtistId
##      &lt;int&gt; &lt;chr&gt;                                    &lt;int&gt;
##  1       1 For Those About To Rock We Salute You        1
##  2       2 Balls to the Wall                            2
##  3       3 Restless and Wild                            2
##  4       4 Let There Be Rock                            1
##  5       5 Big Ones                                     3
##  6       6 Jagged Little Pill                           4
##  7       7 Facelift                                     5
##  8       8 Warner 25 Anos                               6
##  9       9 Plays Metallica By Four Cellos               7
## 10      10 Audioslave                                   8</code></pre>
<p>The output looks just like a <code>data.frame</code> that we are familiar
with. But it’s important to know that it’s not really
a dataframe. For example, what about if we use
the <code>dim()</code> function?</p>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="week-6.html#cb172-1"></a><span class="kw">tbl</span>(conn, <span class="st">&quot;Album&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb172-2"><a href="week-6.html#cb172-2"></a><span class="st">  </span><span class="kw">dim</span>()</span></code></pre></div>
<pre><code>## [1] NA  3</code></pre>
<p>Interesting! We see that the number of rows returned is <code>NA</code>.
This is because these functions are different than operating
on datasets in memory (e.g. loading data into memory using
<code>read_csv()</code>). Instead, <code>dplyr</code> communicates differently
with a SQLite database.</p>
<p>Let’s consider our example. If we were to use straight SQL,
the following SQL query returns the first 10 rows
from the <code>Album</code> table:</p>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="week-6.html#cb174-1"></a>SELECT <span class="op">*</span></span>
<span id="cb174-2"><a href="week-6.html#cb174-2"></a>FROM <span class="st">`</span><span class="dt">Album</span><span class="st">`</span></span>
<span id="cb174-3"><a href="week-6.html#cb174-3"></a>LIMIT <span class="dv">10</span></span></code></pre></div>
<p>In the background, <code>dplyr</code> does the following:</p>
<ul>
<li>translates your R code into SQL</li>
<li>submits it to the database</li>
<li>translates the database’s response into an R data frame</li>
</ul>
<p>To better understand the <code>dplyr</code> code, we can use the
<code>show_query()</code> function:</p>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb175-1"><a href="week-6.html#cb175-1"></a>Album &lt;-<span class="st"> </span><span class="kw">tbl</span>(conn, <span class="st">&quot;Album&quot;</span>)</span>
<span id="cb175-2"><a href="week-6.html#cb175-2"></a><span class="kw">show_query</span>(<span class="kw">head</span>(Album, <span class="dt">n =</span> <span class="dv">10</span>))</span></code></pre></div>
<pre><code>## &lt;SQL&gt;
## SELECT *
## FROM `Album`
## LIMIT 10</code></pre>
<p>This is nice because instead of having to write the
SQL query ourself, we can just use the <code>dplyr</code> and R
syntax that we are used to.</p>
<p>However, the downside is that <code>dplyr</code> never gets to see the
full <code>Album</code> table. It only sends our query to the database,
waits for a response and returns the query. However, in this
way we can interact with large datasets!</p>
<p>Many of the usual <code>dplyr</code> functions are available too:</p>
<ul>
<li><code>select()</code></li>
<li><code>filter()</code></li>
<li><code>summarize()</code></li>
</ul>
<p>and many join functions.</p>
<p>Ok let’s try some of the functions out.
First, let’s count how many albums each
artist has made.</p>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb177-1"><a href="week-6.html#cb177-1"></a><span class="kw">tbl</span>(conn, <span class="st">&quot;Album&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb177-2"><a href="week-6.html#cb177-2"></a><span class="st">  </span><span class="kw">group_by</span>(ArtistId) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb177-3"><a href="week-6.html#cb177-3"></a><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">n =</span> <span class="kw">count</span>(ArtistId)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb177-4"><a href="week-6.html#cb177-4"></a><span class="st">  </span><span class="kw">head</span>(<span class="dt">n=</span><span class="dv">10</span>)</span></code></pre></div>
<pre><code>## # Source:   lazy query [?? x 2]
## # Database: sqlite 3.33.0 [/cloud/project/data/Chinook.sqlite]
##    ArtistId     n
##       &lt;int&gt; &lt;int&gt;
##  1        1     2
##  2        2     2
##  3        3     1
##  4        4     1
##  5        5     1
##  6        6     2
##  7        7     1
##  8        8     3
##  9        9     1
## 10       10     1</code></pre>
<p>Next, let’s plot it.</p>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="week-6.html#cb179-1"></a><span class="kw">library</span>(ggplot2)</span>
<span id="cb179-2"><a href="week-6.html#cb179-2"></a><span class="kw">tbl</span>(conn, <span class="st">&quot;Album&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb179-3"><a href="week-6.html#cb179-3"></a><span class="st">  </span><span class="kw">group_by</span>(ArtistId) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb179-4"><a href="week-6.html#cb179-4"></a><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">n =</span> <span class="kw">count</span>(ArtistId)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb179-5"><a href="week-6.html#cb179-5"></a><span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(n)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb179-6"><a href="week-6.html#cb179-6"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> ArtistId, <span class="dt">y =</span> n)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb179-7"><a href="week-6.html#cb179-7"></a><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>)</span></code></pre></div>
<p><img src="06-week_files/figure-html/unnamed-chunk-40-1.png" width="672" /></p>
<p>Let’s also extract the first letter from each
album and plot the frequency of each letter.</p>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="week-6.html#cb180-1"></a><span class="kw">tbl</span>(conn, <span class="st">&quot;Album&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb180-2"><a href="week-6.html#cb180-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">first_letter =</span> <span class="kw">str_sub</span>(Title, <span class="dt">end =</span> <span class="dv">1</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb180-3"><a href="week-6.html#cb180-3"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(first_letter)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb180-4"><a href="week-6.html#cb180-4"></a><span class="st">  </span><span class="kw">geom_bar</span>()</span></code></pre></div>
<p><img src="06-week_files/figure-html/unnamed-chunk-41-1.png" width="672" /></p>
</div>
<div id="delayed-execution" class="section level3">
<h3><span class="header-section-number">7.8.2</span> Delayed execution</h3>
<p>One important feature of <code>dbplyr</code> for large data sets is delayed execution. From the dbplyr documentation:</p>
<blockquote>
<ul>
<li>It never pulls data into R unless you explicitly ask for it.</li>
<li>It delays doing any work until the last possible moment: it collects together everything you want to do and then sends it to the database in one step.</li>
</ul>
</blockquote>
<p>This means that when you perform a command like this</p>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="week-6.html#cb181-1"></a>test =<span class="st"> </span><span class="kw">tbl</span>(conn, <span class="st">&quot;Album&quot;</span>) </span></code></pre></div>
<p>Then the database hasn’t been touched! It won’t be until you run the command. Even then it will only pull the first 10 rows of the result once you ask to see the data</p>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="week-6.html#cb182-1"></a>test </span></code></pre></div>
<pre><code>## # Source:   table&lt;Album&gt; [?? x 3]
## # Database: sqlite 3.33.0 [/cloud/project/data/Chinook.sqlite]
##    AlbumId Title                                 ArtistId
##      &lt;int&gt; &lt;chr&gt;                                    &lt;int&gt;
##  1       1 For Those About To Rock We Salute You        1
##  2       2 Balls to the Wall                            2
##  3       3 Restless and Wild                            2
##  4       4 Let There Be Rock                            1
##  5       5 Big Ones                                     3
##  6       6 Jagged Little Pill                           4
##  7       7 Facelift                                     5
##  8       8 Warner 25 Anos                               6
##  9       9 Plays Metallica By Four Cellos               7
## 10      10 Audioslave                                   8
## # … with more rows</code></pre>
<p>If you want to pull all of the data into R, a good idea is to first check and see how many rows it has. You can do this with the <code>count</code> function</p>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="week-6.html#cb184-1"></a>test <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">count</span>()</span></code></pre></div>
<pre><code>## # Source:   lazy query [?? x 1]
## # Database: sqlite 3.33.0 [/cloud/project/data/Chinook.sqlite]
##       n
##   &lt;int&gt;
## 1   347</code></pre>
<p>In this case it is a small number, so we can pull all of the data into memory in R using the <code>collect</code> function - the resulting data frame has the same number of rows as we discovered using the count function.</p>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="week-6.html#cb186-1"></a>test <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">collect</span>()</span></code></pre></div>
<pre><code>## # A tibble: 347 x 3
##    AlbumId Title                                 ArtistId
##      &lt;int&gt; &lt;chr&gt;                                    &lt;int&gt;
##  1       1 For Those About To Rock We Salute You        1
##  2       2 Balls to the Wall                            2
##  3       3 Restless and Wild                            2
##  4       4 Let There Be Rock                            1
##  5       5 Big Ones                                     3
##  6       6 Jagged Little Pill                           4
##  7       7 Facelift                                     5
##  8       8 Warner 25 Anos                               6
##  9       9 Plays Metallica By Four Cellos               7
## 10      10 Audioslave                                   8
## # … with 337 more rows</code></pre>
<p>When working with databases it is a good idea to think about ways you can make the data smaller before pulling it into memory. One is through grouping and aggregating as we showed above</p>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb188-1"><a href="week-6.html#cb188-1"></a>test <span class="op">%&gt;%</span></span>
<span id="cb188-2"><a href="week-6.html#cb188-2"></a><span class="st">  </span><span class="kw">group_by</span>(ArtistId) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb188-3"><a href="week-6.html#cb188-3"></a><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">n =</span> <span class="kw">count</span>(ArtistId)) <span class="op">%&gt;%</span></span>
<span id="cb188-4"><a href="week-6.html#cb188-4"></a><span class="st">        </span><span class="kw">collect</span>()</span></code></pre></div>
<pre><code>## # A tibble: 204 x 2
##    ArtistId     n
##       &lt;int&gt; &lt;int&gt;
##  1        1     2
##  2        2     2
##  3        3     1
##  4        4     1
##  5        5     1
##  6        6     2
##  7        7     1
##  8        8     3
##  9        9     1
## 10       10     1
## # … with 194 more rows</code></pre>
<p>Thinking cleverly about how to make data small in database takes a certain way of thinking, but with practice can make your data analysis much easier. Some packages have been developed that automatically push certain comptuations to the database for you including:</p>
<ul>
<li><a href="https://db.rstudio.com/dbplot/">dbplot</a> for making plots in database</li>
<li><a href="https://github.com/tidymodels/modeldb">modeldb</a> for running certain types of models (like regression) in database</li>
</ul>
<p>Some important things to consider when dealing with data in databases are:</p>
<ol style="list-style-type: decimal">
<li>Making sure you count your data before you pull it down into a local environment.</li>
<li>Listing and looking through each table. Sometimes called database spelunking this is an important step before using any database</li>
<li>Understanding whether it costs more computationally to do an analysis mostly in the database or mostly on your computer. This will involve tradeoffs depending on the size of the data and your local computing power.</li>
<li>Ensuring you have proper authentication to access the databases and tables that you care about.</li>
</ol>
</div>
</div>
<div id="apis" class="section level2">
<h2><span class="header-section-number">7.9</span> APIs</h2>
<p>Application Programming Interfaces (or APIs) are a way to access data through a structured URL over the web. Most social media companies provide their data to the public through this format. But there are a wide range of other government entities, companies, and non-profits that make their data available via an API.</p>
<p>The reason companies distribute data this way is because they can control what and how much data you download. Most have rate limits - the number of calls or amount of data you can pull per unit time. You need to respect these limits or your data collection will be blocked.</p>
<p>When you want to collect data from an API, the first thing you should check and see is if someone built a package for that API. For most common APIs a package will exist (for example <a href="https://github.com/ropensci/rtweet">rtweet</a> or <a href="https://github.com/pablobarbera/Rfacebook">Rfacebook</a>). If they don’t exist, you can use the <a href="https://cran.r-project.org/web/packages/httr/vignettes/quickstart.html">httr</a> R package to build your own access to an API.</p>
<p>Regardless of whether you are using an R package or building your own, you should:</p>
<ol style="list-style-type: decimal">
<li>Read the developer docs - look for rate limits, licenses, and other information about how to use the API appropriately.</li>
<li>Look at the worked examples, to figure out how to use the API. Each one is different, but all have a similar, structured URL approach.</li>
</ol>
<p>Let’s dissect an example of an API url. If you go to this url:
<a href="https://api.github.com/search/repositories?q=created:2014-08-13+language:r+-user:cran&amp;type" class="uri">https://api.github.com/search/repositories?q=created:2014-08-13+language:r+-user:cran&amp;type</a> you will get a bunch of JSON - this is data from the Github API. Let’s break down each part of this url:</p>
<ol style="list-style-type: decimal">
<li><a href="https://api.github.com/search/repositories" class="uri">https://api.github.com/search/repositories</a>
- This is the base url that tells us we will be asking for repository data</li>
<li>?q=
- This defines the “query”, or the search, we will be doing</li>
<li>created:2014-08-13
- This tells us we will search for repos created on 2014-08-13</li>
<li><ul>
<li><pre><code>- This is like an &quot;and&quot; for the search</code></pre></li>
</ul></li>
<li>language:r
- This tells us we are searching for only R repos</li>
<li>-user:cran&amp;type
- This tells us we don’t want any repos created by cran (to avoid explosion of repos - cran has a lot!)</li>
</ol>
<p>Using the <code>httr</code> package we can access these data directly using the <code>GET</code> command:</p>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb191-1"><a href="week-6.html#cb191-1"></a><span class="kw">library</span>(httr)</span>
<span id="cb191-2"><a href="week-6.html#cb191-2"></a>query_url =<span class="st"> &quot;https://api.github.com/search/repositories?q=created:2014-08-13+language:r+-user:cran&quot;</span></span>
<span id="cb191-3"><a href="week-6.html#cb191-3"></a>req =<span class="st"> </span><span class="kw">GET</span>(query_url)</span>
<span id="cb191-4"><a href="week-6.html#cb191-4"></a>req</span></code></pre></div>
<pre><code>## Response [https://api.github.com/search/repositories?q=created:2014-08-13+language:r+-user:cran]
##   Date: 2020-11-02 11:58
##   Status: 200
##   Content-Type: application/json; charset=utf-8
##   Size: 179 kB
## {
##   &quot;total_count&quot;: 77,
##   &quot;incomplete_results&quot;: false,
##   &quot;items&quot;: [
##     {
##       &quot;id&quot;: 22907468,
##       &quot;node_id&quot;: &quot;MDEwOlJlcG9zaXRvcnkyMjkwNzQ2OA==&quot;,
##       &quot;name&quot;: &quot;computel&quot;,
##       &quot;full_name&quot;: &quot;lilit-nersisyan/computel&quot;,
##       &quot;private&quot;: false,
## ...</code></pre>
<p>The resulting request will give us the status, the date, and information about the content. We can use the <code>content</code> function to extract the data- in this case a nested list:</p>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb193-1"><a href="week-6.html#cb193-1"></a><span class="kw">names</span>(<span class="kw">content</span>(req))</span></code></pre></div>
<pre><code>## [1] &quot;total_count&quot;        &quot;incomplete_results&quot; &quot;items&quot;</code></pre>
<p>Not all APIs are open like this Github API. You may have to create a developer account and authenticate before accessing the data. You can usually figure this out by following the developer docs on each individual site.</p>
<p>Some things to keep in mind when you are downloading data from APIs are the following:</p>
<ol style="list-style-type: decimal">
<li>Pay attention to the terms of service and developer docs</li>
<li>Respect rate limits so you won’t be blocked</li>
<li>Think <em>carefully</em> about what data you pull and share, it is very easy to collect data people wouldn’t want shared</li>
<li>Remember the data are constantly updating since they are from the web, so you might want to save versions of the data</li>
<li>Remember that the data are only the version that the company/government/entity wants to expose, so may have errors or issues due to translation.</li>
</ol>
</div>
<div id="webscraping" class="section level2">
<h2><span class="header-section-number">7.10</span> Webscraping</h2>
<p>Do we want to purchase a book on Amazon?</p>
<p>Next we are going to learn about what to do if
your data is on a website (XML or HTML) formatted
to be read by humans instead of R.</p>
<p>We will use the (really powerful)
<a href="https://cran.r-project.org/web/packages/rvest/rvest.pdf">rvest</a>
R package to do what is often called
“scraping data from the web”.</p>
<p>Before we do that, we need to set up a
few things:</p>
<ul>
<li><a href="http://selectorgadget.com/">SelectorGadget tool</a></li>
<li><a href="https://cran.r-project.org/web/packages/rvest/vignettes/selectorgadget.html">rvest and SelectorGadget guide</a></li>
<li><a href="http://flukeout.github.io/#">Awesome tutorial for CSS Selectors</a></li>
<li><a href="https://cran.r-project.org/web/packages/stringr/vignettes/stringr.html">Introduction to stringr</a></li>
<li><a href="https://stat545-ubc.github.io/block022_regular-expression.html">Regular Expressions/stringr tutorial</a></li>
<li><a href="https://regex101.com/#python">Regular Expression online tester</a>- explains a regular expression as it is built, and confirms live whether and how it matches particular text.</li>
</ul>
<p>We’re going to be scraping <a href="http://www.amazon.com/ggplot2-Elegant-Graphics-Data-Analysis/product-reviews/0387981403/ref=cm_cr_dp_qt_see_all_top?ie=UTF8&amp;showViewpoints=1&amp;sortBy=helpful">this page</a>: it just contains the (first page of) reviews of the
ggplot2 book by Hadley Wickham.</p>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb195-1"><a href="week-6.html#cb195-1"></a>url &lt;-<span class="st"> &quot;http://www.amazon.com/ggplot2-Elegant-Graphics-Data-Analysis/product-reviews/0387981403/ref=cm_cr_dp_qt_see_all_top?ie=UTF8&amp;showViewpoints=1&amp;sortBy=helpful&quot;</span></span></code></pre></div>
<p>We use the <code>rvest</code> package to download this page.</p>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="week-6.html#cb196-1"></a><span class="kw">library</span>(rvest)</span></code></pre></div>
<pre><code>## Loading required package: xml2</code></pre>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb198-1"><a href="week-6.html#cb198-1"></a>h &lt;-<span class="st"> </span><span class="kw">read_html</span>(url)</span></code></pre></div>
<p>Now <code>h</code> is an <code>xml_document</code> that contains the contents of the page:</p>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb199-1"><a href="week-6.html#cb199-1"></a>h</span></code></pre></div>
<pre><code>## {html_document}
## &lt;html lang=&quot;en-us&quot; class=&quot;a-no-js&quot; data-19ax5a9jf=&quot;dingo&quot;&gt;
## [1] &lt;head&gt;\n&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8 ...
## [2] &lt;body&gt;\n&lt;span id=&quot;cr-state-object&quot; data-state=&#39;{&quot;asin&quot;:&quot;0387981403&quot;,&quot;devi ...</code></pre>
<p>How can you actually pull the interesting
information out? That’s where CSS selectors come in.</p>
<div id="css-selectors" class="section level3">
<h3><span class="header-section-number">7.10.1</span> CSS Selectors</h3>
<p>CSS selectors are a way to specify a subset of
nodes (that is, units of content) on a web page
(e.g., just getting the titles of reviews).
CSS selectors are very powerful and not too
challenging to master- here’s
<a href="http://flukeout.github.io/#">a great tutorial</a>
But honestly you can get a lot done even with
very little understanding, by using a tool
called SelectorGadget.</p>
<p>Install the <a href="http://selectorgadget.com/">SelectorGadget</a>
on your web browser. (If you use Chrome you can
use the Chrome extension, otherwise drag the
provided link into your bookmarks bar).
<a href="http://selectorgadget.com/">Here’s a guide for how to use it with rvest to “point-and-click” your way to a working selector</a>.</p>
<p>For example, if you just wanted the titles,
you’ll end up with a selector that looks
something like <code>.a-text-bold span</code>. You can pipe
your HTML object along with that selector
into the <code>html_nodes</code> function, to select
just those nodes:</p>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="week-6.html#cb201-1"></a>h <span class="op">%&gt;%</span></span>
<span id="cb201-2"><a href="week-6.html#cb201-2"></a><span class="st">  </span><span class="kw">html_nodes</span>(<span class="st">&quot;.a-text-bold span&quot;</span>)</span></code></pre></div>
<pre><code>## {xml_nodeset (10)}
##  [1] &lt;span&gt;Must-have reference for R graphics&lt;/span&gt;
##  [2] &lt;span&gt;Still a great package and highly worth learning - but the text is  ...
##  [3] &lt;span&gt;Excellent&lt;/span&gt;
##  [4] &lt;span&gt;Nice resource, but already out of date&lt;/span&gt;
##  [5] &lt;span&gt;The best guide to the best graphics (I think) out there.&lt;/span&gt;
##  [6] &lt;span&gt;Graphing in R&lt;/span&gt;
##  [7] &lt;span&gt;Excellent content, poor adaptation to kindle&lt;/span&gt;
##  [8] &lt;span&gt;Excellent R resource for the Kindle&lt;/span&gt;
##  [9] &lt;span&gt;Great book, outdated&lt;/span&gt;
## [10] &lt;span&gt;Indispensable resource for ggplot2 users&lt;/span&gt;</code></pre>
<p>But you need the text from each of these, not the full tags. Pipe to the <code>html_text</code> function to pull these out:</p>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="week-6.html#cb203-1"></a>review_titles &lt;-<span class="st"> </span>h <span class="op">%&gt;%</span></span>
<span id="cb203-2"><a href="week-6.html#cb203-2"></a><span class="st">  </span><span class="kw">html_nodes</span>(<span class="st">&quot;.a-text-bold span&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb203-3"><a href="week-6.html#cb203-3"></a><span class="st">  </span><span class="kw">html_text</span>()</span>
<span id="cb203-4"><a href="week-6.html#cb203-4"></a>review_titles</span></code></pre></div>
<pre><code>##  [1] &quot;Must-have reference for R graphics&quot;                                                          
##  [2] &quot;Still a great package and highly worth learning - but the text is getting quite out of date.&quot;
##  [3] &quot;Excellent&quot;                                                                                   
##  [4] &quot;Nice resource, but already out of date&quot;                                                      
##  [5] &quot;The best guide to the best graphics (I think) out there.&quot;                                    
##  [6] &quot;Graphing in R&quot;                                                                               
##  [7] &quot;Excellent content, poor adaptation to kindle&quot;                                                
##  [8] &quot;Excellent R resource for the Kindle&quot;                                                         
##  [9] &quot;Great book, outdated&quot;                                                                        
## [10] &quot;Indispensable resource for ggplot2 users&quot;</code></pre>
<p>Now we’ve extracted something useful! Similarly,
let’s grab the format (hardcover or paperback).
Some experimentation with SelectorGadget
shows it’s:</p>
<div class="sourceCode" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb205-1"><a href="week-6.html#cb205-1"></a>h <span class="op">%&gt;%</span></span>
<span id="cb205-2"><a href="week-6.html#cb205-2"></a><span class="st">  </span><span class="kw">html_nodes</span>(<span class="st">&quot;.a-size-mini.a-color-secondary&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb205-3"><a href="week-6.html#cb205-3"></a><span class="st">  </span><span class="kw">html_text</span>()</span></code></pre></div>
<pre><code>## character(0)</code></pre>
<p>Now, we may be annoyed that it always
starts with <code>Format:</code>. Let’s introduce
the <code>stringr</code> package.</p>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="week-6.html#cb207-1"></a>formats &lt;-<span class="st"> </span>h <span class="op">%&gt;%</span></span>
<span id="cb207-2"><a href="week-6.html#cb207-2"></a><span class="st">  </span><span class="kw">html_nodes</span>(<span class="st">&quot;.a-size-mini.a-color-secondary&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb207-3"><a href="week-6.html#cb207-3"></a><span class="st">  </span><span class="kw">html_text</span>() <span class="op">%&gt;%</span></span>
<span id="cb207-4"><a href="week-6.html#cb207-4"></a><span class="st">  </span>stringr<span class="op">::</span><span class="kw">str_replace</span>(<span class="st">&quot;Format: &quot;</span>, <span class="st">&quot;&quot;</span>)</span>
<span id="cb207-5"><a href="week-6.html#cb207-5"></a>formats</span></code></pre></div>
<pre><code>## character(0)</code></pre>
<p>We could do similar exercise for extracting
the number of stars and whether or not someone
found a review useful. This would help us decide
if we were interested in purchasing the book!</p>
<p>Webscraping is the opposite of APIs in some sense. Anything that is public on a website can technically be webscraped using things like the <code>rvest</code> package. However, that doesn’t mean it is always ethical or a good idea to do so. One <a href="http://motherboard.vice.com/read/70000-okcupid-users-just-had-their-data-published">extreme example</a> is a student who published the private OkCupid data of 70,000 people he had scraped from the web. This included private information, including sexual preferences, pictures, and intimate details from the profiles. At the time the way he scraped the data did not violate the terms of service of the website, but the way the data were collected and shared were ethically disasterous. So when scraping data think very carefully about the ethics and purpose of your data collection.</p>
<p>Some other things to be aware of with data scraping are</p>
<p>1.Most websites have a file called <code>robots.txt</code>. You can see the one for Google <a href="https://www.google.com/robots.txt">here</a> this file tells you what it is ok to scrape and not.</p>
<ol start="2" style="list-style-type: decimal">
<li><p>Some companies will block you if you try to scrape their website. In <a href="https://www.theguardian.com/science/2012/may/23/text-mining-research-tool-forbidden">one case</a> a student got his whole university blocked from accessing certain journals by webscraping!</p></li>
<li><p>The data will certainly update frequently if you scrape it from a website.</p></li>
<li><p>Some companies consider data on their websites proprietary and you can find yourself in legal battles if you collect and use them for commercial purposes.</p></li>
</ol>
</div>
</div>
<div id="google-ing" class="section level2">
<h2><span class="header-section-number">7.11</span> Google-ing</h2>
<p>It seems silly to talk about using Google in an “advanced” course. But for things like getting data you will be spending a lot of time Googling. As packages evolve super rapidly, you will often want to check your workflows and make sure they haven’t gone out of date. For example, since the last time I taught this course, the <code>googlesheets</code> package has been replaced by <code>googlesheets4</code>, among other changes!</p>
<p>A good default move when embarking on a new data collection exercise is to Google for workflows for the thing you want. I generally use variations on:</p>
<ul>
<li>“rstats reading data type x”</li>
<li>“rstats tutorial on data type x”</li>
<li>“stack overflow data type x”</li>
</ul>
<p>As a place to get started, but I also use Google by copying and pasting exact error messages I run into with any new package. I point this out primarily to make sure you know that it is not only acceptable, but encouraged to use the internet and Google as a resource when figuring out how to handle new data sets.</p>
</div>
<div id="additional-resources" class="section level2">
<h2><span class="header-section-number">7.12</span> Additional Resources</h2>
<div class="resources">
<ul>
<li>An outstanding JSM tutorial on <a href="https://github.com/simonmunzert/rscraping-jsm-2016">webscraping</a></li>
<li>The databases using Rstudio <a href="https://db.rstudio.com/">website</a></li>
<li>Relational data section of <a href="https://r4ds.had.co.nz/relational-data.html">R for Data Science</a></li>
<li>Some of my <a href="https://docs.google.com/presentation/d/1K-TxNcPg1qugUABMH5LATh2AqBPLVTplLfQ8aBUasD0/edit#slide=id.g5d42ac9146_0_532">lecture slides on webscraping and APIs</a></li>
<li>Some of my <a href="https://docs.google.com/presentation/d/11vCz5KrS2uKhr1rOlmeVzXGslkz5IKoEjgMTgpaK5ds/edit">lecture slides on databases</a></li>
</ul>
</div>
</div>
<div id="homework" class="section level2">
<h2><span class="header-section-number">7.13</span> Homework</h2>
<div class="homework">
<ul>
<li><strong>Template Repo</strong>: <a href="https://github.com/advdatasci/homework6" class="uri">https://github.com/advdatasci/homework6</a></li>
<li><strong>Repo Name</strong>: homework6-ind-yourgithubusername</li>
<li><strong>Pull Date</strong>: 2020/10/12 9:00AM Baltimore Time</li>
</ul>
</div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="week-5.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="week-7.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["ads2020.pdf", "ads2020.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
